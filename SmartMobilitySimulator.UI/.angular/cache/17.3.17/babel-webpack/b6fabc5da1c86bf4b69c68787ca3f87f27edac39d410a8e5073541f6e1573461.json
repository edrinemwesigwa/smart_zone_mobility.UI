{"ast":null,"code":"import { Chart, registerables } from \"chart.js\";\nimport * as i0 from \"@angular/core\";\nexport class ChartService {\n  constructor() {\n    this.charts = new Map();\n    Chart.register(...registerables);\n  }\n  /**\n   * Create a new chart\n   */\n  createChart(canvasId, config, chartId) {\n    const canvas = document.getElementById(canvasId);\n    if (!canvas) {\n      throw new Error(`Canvas element with id '${canvasId}' not found`);\n    }\n    // Destroy existing chart if any\n    if (this.charts.has(chartId || canvasId)) {\n      this.charts.get(chartId || canvasId)?.destroy();\n    }\n    const chart = new Chart(canvas, config);\n    this.charts.set(chartId || canvasId, chart);\n    return chart;\n  }\n  /**\n   * Create a bar chart\n   */\n  createBarChart(canvasId, labels, datasets, options, chartId) {\n    const config = {\n      type: \"bar\",\n      data: {\n        labels,\n        datasets: datasets.map(ds => ({\n          ...ds,\n          backgroundColor: ds.backgroundColor || \"#3b82f6\",\n          borderColor: ds.backgroundColor || \"#3b82f6\",\n          borderWidth: 1\n        }))\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: \"top\"\n          },\n          title: {\n            display: false\n          }\n        },\n        ...options\n      }\n    };\n    return this.createChart(canvasId, config, chartId);\n  }\n  /**\n   * Create a line chart\n   */\n  createLineChart(canvasId, labels, datasets, options, chartId) {\n    const config = {\n      type: \"line\",\n      data: {\n        labels,\n        datasets: datasets.map(ds => ({\n          ...ds,\n          borderColor: ds.borderColor || \"#3b82f6\",\n          backgroundColor: ds.backgroundColor || \"rgba(59, 130, 246, 0.1)\",\n          fill: ds.fill !== undefined ? ds.fill : true,\n          tension: 0.4\n        }))\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: \"top\"\n          }\n        },\n        ...options\n      }\n    };\n    return this.createChart(canvasId, config, chartId);\n  }\n  /**\n   * Create a doughnut chart\n   */\n  createDoughnutChart(canvasId, labels, datasets, options, chartId) {\n    const config = {\n      type: \"doughnut\",\n      data: {\n        labels,\n        datasets: datasets.map(ds => ({\n          ...ds,\n          backgroundColor: ds.backgroundColor || [\"#3b82f6\", \"#10b981\", \"#f59e0b\", \"#ef4444\", \"#8b5cf6\"]\n        }))\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: \"right\"\n          }\n        },\n        ...options\n      }\n    };\n    return this.createChart(canvasId, config, chartId);\n  }\n  /**\n   * Create a pie chart\n   */\n  createPieChart(canvasId, labels, datasets, options, chartId) {\n    const config = {\n      type: \"pie\",\n      data: {\n        labels,\n        datasets: datasets.map(ds => ({\n          ...ds,\n          backgroundColor: ds.backgroundColor || [\"#3b82f6\", \"#10b981\", \"#f59e0b\", \"#ef4444\", \"#8b5cf6\"]\n        }))\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            position: \"right\"\n          }\n        },\n        ...options\n      }\n    };\n    return this.createChart(canvasId, config, chartId);\n  }\n  /**\n   * Get a chart by ID\n   */\n  getChart(chartId) {\n    return this.charts.get(chartId);\n  }\n  /**\n   * Update chart data\n   */\n  updateChartData(chartId, labels, datasets) {\n    const chart = this.charts.get(chartId);\n    if (chart) {\n      chart.data.labels = labels;\n      chart.data.datasets = datasets;\n      chart.update();\n    }\n  }\n  /**\n   * Destroy a chart\n   */\n  destroyChart(chartId) {\n    const chart = this.charts.get(chartId);\n    if (chart) {\n      chart.destroy();\n      this.charts.delete(chartId);\n    }\n  }\n  /**\n   * Destroy all charts\n   */\n  destroyAllCharts() {\n    this.charts.forEach(chart => chart.destroy());\n    this.charts.clear();\n  }\n  /**\n   * Export chart as image\n   */\n  exportChartAsImage(chartId, filename = \"chart.png\") {\n    const chart = this.charts.get(chartId);\n    if (chart) {\n      const link = document.createElement(\"a\");\n      link.download = filename;\n      link.href = chart.toBase64Image();\n      link.click();\n    }\n  }\n  static {\n    this.ɵfac = function ChartService_Factory(t) {\n      return new (t || ChartService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ChartService,\n      factory: ChartService.ɵfac,\n      providedIn: \"root\"\n    });\n  }\n}","map":{"version":3,"names":["Chart","registerables","ChartService","constructor","charts","Map","register","createChart","canvasId","config","chartId","canvas","document","getElementById","Error","has","get","destroy","chart","set","createBarChart","labels","datasets","options","type","data","map","ds","backgroundColor","borderColor","borderWidth","responsive","maintainAspectRatio","plugins","legend","position","title","display","createLineChart","fill","undefined","tension","createDoughnutChart","createPieChart","getChart","updateChartData","update","destroyChart","delete","destroyAllCharts","forEach","clear","exportChartAsImage","filename","link","createElement","download","href","toBase64Image","click","factory","ɵfac","providedIn"],"sources":["C:\\Users\\edrin\\OneDrive\\Desktop\\Mobility\\SmartZoneSimulator.UI\\src\\app\\services\\chart.service.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\r\nimport { Chart, ChartConfiguration, ChartType, registerables } from \"chart.js\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class ChartService {\r\n  private charts: Map<string, Chart> = new Map();\r\n\r\n  constructor() {\r\n    Chart.register(...registerables);\r\n  }\r\n\r\n  /**\r\n   * Create a new chart\r\n   */\r\n  createChart(\r\n    canvasId: string,\r\n    config: ChartConfiguration,\r\n    chartId?: string,\r\n  ): Chart {\r\n    const canvas = document.getElementById(canvasId) as HTMLCanvasElement;\r\n    if (!canvas) {\r\n      throw new Error(`Canvas element with id '${canvasId}' not found`);\r\n    }\r\n\r\n    // Destroy existing chart if any\r\n    if (this.charts.has(chartId || canvasId)) {\r\n      this.charts.get(chartId || canvasId)?.destroy();\r\n    }\r\n\r\n    const chart = new Chart(canvas, config);\r\n    this.charts.set(chartId || canvasId, chart);\r\n    return chart;\r\n  }\r\n\r\n  /**\r\n   * Create a bar chart\r\n   */\r\n  createBarChart(\r\n    canvasId: string,\r\n    labels: string[],\r\n    datasets: {\r\n      label: string;\r\n      data: number[];\r\n      backgroundColor?: string | string[];\r\n    }[],\r\n    options?: any,\r\n    chartId?: string,\r\n  ): Chart {\r\n    const config: ChartConfiguration = {\r\n      type: \"bar\",\r\n      data: {\r\n        labels,\r\n        datasets: datasets.map((ds) => ({\r\n          ...ds,\r\n          backgroundColor: ds.backgroundColor || \"#3b82f6\",\r\n          borderColor: ds.backgroundColor || \"#3b82f6\",\r\n          borderWidth: 1,\r\n        })),\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        plugins: {\r\n          legend: {\r\n            position: \"top\",\r\n          },\r\n          title: {\r\n            display: false,\r\n          },\r\n        },\r\n        ...options,\r\n      },\r\n    };\r\n    return this.createChart(canvasId, config, chartId);\r\n  }\r\n\r\n  /**\r\n   * Create a line chart\r\n   */\r\n  createLineChart(\r\n    canvasId: string,\r\n    labels: string[],\r\n    datasets: {\r\n      label: string;\r\n      data: number[];\r\n      borderColor?: string;\r\n      backgroundColor?: string;\r\n      fill?: boolean;\r\n    }[],\r\n    options?: any,\r\n    chartId?: string,\r\n  ): Chart {\r\n    const config: ChartConfiguration = {\r\n      type: \"line\",\r\n      data: {\r\n        labels,\r\n        datasets: datasets.map((ds) => ({\r\n          ...ds,\r\n          borderColor: ds.borderColor || \"#3b82f6\",\r\n          backgroundColor: ds.backgroundColor || \"rgba(59, 130, 246, 0.1)\",\r\n          fill: ds.fill !== undefined ? ds.fill : true,\r\n          tension: 0.4,\r\n        })),\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        plugins: {\r\n          legend: {\r\n            position: \"top\",\r\n          },\r\n        },\r\n        ...options,\r\n      },\r\n    };\r\n    return this.createChart(canvasId, config, chartId);\r\n  }\r\n\r\n  /**\r\n   * Create a doughnut chart\r\n   */\r\n  createDoughnutChart(\r\n    canvasId: string,\r\n    labels: string[],\r\n    datasets: { label: string; data: number[]; backgroundColor?: string[] }[],\r\n    options?: any,\r\n    chartId?: string,\r\n  ): Chart {\r\n    const config: ChartConfiguration = {\r\n      type: \"doughnut\",\r\n      data: {\r\n        labels,\r\n        datasets: datasets.map((ds) => ({\r\n          ...ds,\r\n          backgroundColor: ds.backgroundColor || [\r\n            \"#3b82f6\",\r\n            \"#10b981\",\r\n            \"#f59e0b\",\r\n            \"#ef4444\",\r\n            \"#8b5cf6\",\r\n          ],\r\n        })),\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        plugins: {\r\n          legend: {\r\n            position: \"right\",\r\n          },\r\n        },\r\n        ...options,\r\n      },\r\n    };\r\n    return this.createChart(canvasId, config, chartId);\r\n  }\r\n\r\n  /**\r\n   * Create a pie chart\r\n   */\r\n  createPieChart(\r\n    canvasId: string,\r\n    labels: string[],\r\n    datasets: { label: string; data: number[]; backgroundColor?: string[] }[],\r\n    options?: any,\r\n    chartId?: string,\r\n  ): Chart {\r\n    const config: ChartConfiguration = {\r\n      type: \"pie\",\r\n      data: {\r\n        labels,\r\n        datasets: datasets.map((ds) => ({\r\n          ...ds,\r\n          backgroundColor: ds.backgroundColor || [\r\n            \"#3b82f6\",\r\n            \"#10b981\",\r\n            \"#f59e0b\",\r\n            \"#ef4444\",\r\n            \"#8b5cf6\",\r\n          ],\r\n        })),\r\n      },\r\n      options: {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        plugins: {\r\n          legend: {\r\n            position: \"right\",\r\n          },\r\n        },\r\n        ...options,\r\n      },\r\n    };\r\n    return this.createChart(canvasId, config, chartId);\r\n  }\r\n\r\n  /**\r\n   * Get a chart by ID\r\n   */\r\n  getChart(chartId: string): Chart | undefined {\r\n    return this.charts.get(chartId);\r\n  }\r\n\r\n  /**\r\n   * Update chart data\r\n   */\r\n  updateChartData(chartId: string, labels: string[], datasets: any[]): void {\r\n    const chart = this.charts.get(chartId);\r\n    if (chart) {\r\n      chart.data.labels = labels;\r\n      chart.data.datasets = datasets;\r\n      chart.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy a chart\r\n   */\r\n  destroyChart(chartId: string): void {\r\n    const chart = this.charts.get(chartId);\r\n    if (chart) {\r\n      chart.destroy();\r\n      this.charts.delete(chartId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy all charts\r\n   */\r\n  destroyAllCharts(): void {\r\n    this.charts.forEach((chart) => chart.destroy());\r\n    this.charts.clear();\r\n  }\r\n\r\n  /**\r\n   * Export chart as image\r\n   */\r\n  exportChartAsImage(chartId: string, filename: string = \"chart.png\"): void {\r\n    const chart = this.charts.get(chartId);\r\n    if (chart) {\r\n      const link = document.createElement(\"a\");\r\n      link.download = filename;\r\n      link.href = chart.toBase64Image();\r\n      link.click();\r\n    }\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}