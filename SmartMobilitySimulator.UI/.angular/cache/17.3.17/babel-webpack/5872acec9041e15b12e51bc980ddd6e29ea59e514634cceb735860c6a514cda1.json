{"ast":null,"code":"import { BehaviorSubject } from \"rxjs\";\nimport { getApiBase } from \"./api-base\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class RTADataService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = `${getApiBase()}/api/rta`;\n    this.mockDataSubject = new BehaviorSubject([]);\n    this.mockData$ = this.mockDataSubject.asObservable();\n  }\n  /**\n   * Generate mock RTA vehicle movement data\n   */\n  generateMockData(zoneId, date, vehicleCount = 100) {\n    return this.http.post(`${this.apiUrl}/generate-mock`, {\n      zoneId,\n      date,\n      vehicleCount\n    });\n  }\n  /**\n   * Get vehicle movements for a zone on a specific date\n   */\n  getVehicleMovements(zoneId, startDate, endDate) {\n    return this.http.get(`${this.apiUrl}/movements`, {\n      params: {\n        zoneId,\n        startDate: startDate.toISOString(),\n        endDate: endDate.toISOString()\n      }\n    });\n  }\n  /**\n   * Get aggregated vehicle statistics\n   */\n  getVehicleStatistics(zoneId, date) {\n    return this.http.get(`${this.apiUrl}/statistics`, {\n      params: {\n        zoneId,\n        date: date.toISOString()\n      }\n    });\n  }\n  /**\n   * Simulate Dubai traffic patterns\n   */\n  generateDubaiTraffic(date) {\n    return this.http.post(`${this.apiUrl}/dubai-traffic`, {\n      date\n    });\n  }\n  /**\n   * Simulate Abu Dhabi traffic patterns\n   */\n  generateAbuDhabiTraffic(date) {\n    return this.http.post(`${this.apiUrl}/abudhabi-traffic`, {\n      date\n    });\n  }\n  /**\n   * Get real-time traffic feed (mock)\n   */\n  getRealTimeTrafficFeed(zoneId) {\n    return this.http.get(`${this.apiUrl}/realtime/${zoneId}`);\n  }\n  static {\n    this.ɵfac = function RTADataService_Factory(t) {\n      return new (t || RTADataService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: RTADataService,\n      factory: RTADataService.ɵfac,\n      providedIn: \"root\"\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","getApiBase","RTADataService","constructor","http","apiUrl","mockDataSubject","mockData$","asObservable","generateMockData","zoneId","date","vehicleCount","post","getVehicleMovements","startDate","endDate","get","params","toISOString","getVehicleStatistics","generateDubaiTraffic","generateAbuDhabiTraffic","getRealTimeTrafficFeed","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\edrin\\OneDrive\\Desktop\\Mobility\\SmartZoneSimulator.UI\\src\\app\\services\\rta-data.service.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { Observable, BehaviorSubject } from \"rxjs\";\r\nimport { VehicleMovement } from \"../models/simulation.model\";\r\nimport { getApiBase } from \"./api-base\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class RTADataService {\r\n  private apiUrl = `${getApiBase()}/api/rta`;\r\n  private mockDataSubject = new BehaviorSubject<VehicleMovement[]>([]);\r\n  public mockData$ = this.mockDataSubject.asObservable();\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n   * Generate mock RTA vehicle movement data\r\n   */\r\n  generateMockData(\r\n    zoneId: string,\r\n    date: Date,\r\n    vehicleCount: number = 100,\r\n  ): Observable<VehicleMovement[]> {\r\n    return this.http.post<VehicleMovement[]>(`${this.apiUrl}/generate-mock`, {\r\n      zoneId,\r\n      date,\r\n      vehicleCount,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get vehicle movements for a zone on a specific date\r\n   */\r\n  getVehicleMovements(\r\n    zoneId: string,\r\n    startDate: Date,\r\n    endDate: Date,\r\n  ): Observable<VehicleMovement[]> {\r\n    return this.http.get<VehicleMovement[]>(`${this.apiUrl}/movements`, {\r\n      params: {\r\n        zoneId,\r\n        startDate: startDate.toISOString(),\r\n        endDate: endDate.toISOString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get aggregated vehicle statistics\r\n   */\r\n  getVehicleStatistics(zoneId: string, date: Date): Observable<any> {\r\n    return this.http.get<any>(`${this.apiUrl}/statistics`, {\r\n      params: {\r\n        zoneId,\r\n        date: date.toISOString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Simulate Dubai traffic patterns\r\n   */\r\n  generateDubaiTraffic(date: Date): Observable<VehicleMovement[]> {\r\n    return this.http.post<VehicleMovement[]>(`${this.apiUrl}/dubai-traffic`, {\r\n      date,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Simulate Abu Dhabi traffic patterns\r\n   */\r\n  generateAbuDhabiTraffic(date: Date): Observable<VehicleMovement[]> {\r\n    return this.http.post<VehicleMovement[]>(\r\n      `${this.apiUrl}/abudhabi-traffic`,\r\n      { date },\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get real-time traffic feed (mock)\r\n   */\r\n  getRealTimeTrafficFeed(zoneId: string): Observable<VehicleMovement[]> {\r\n    return this.http.get<VehicleMovement[]>(\r\n      `${this.apiUrl}/realtime/${zoneId}`,\r\n    );\r\n  }\r\n}\r\n\r\n"],"mappings":"AAEA,SAAqBA,eAAe,QAAQ,MAAM;AAElD,SAASC,UAAU,QAAQ,YAAY;;;AAKvC,OAAM,MAAOC,cAAc;EAKzBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAJhB,KAAAC,MAAM,GAAG,GAAGJ,UAAU,EAAE,UAAU;IAClC,KAAAK,eAAe,GAAG,IAAIN,eAAe,CAAoB,EAAE,CAAC;IAC7D,KAAAO,SAAS,GAAG,IAAI,CAACD,eAAe,CAACE,YAAY,EAAE;EAEf;EAEvC;;;EAGAC,gBAAgBA,CACdC,MAAc,EACdC,IAAU,EACVC,YAAA,GAAuB,GAAG;IAE1B,OAAO,IAAI,CAACR,IAAI,CAACS,IAAI,CAAoB,GAAG,IAAI,CAACR,MAAM,gBAAgB,EAAE;MACvEK,MAAM;MACNC,IAAI;MACJC;KACD,CAAC;EACJ;EAEA;;;EAGAE,mBAAmBA,CACjBJ,MAAc,EACdK,SAAe,EACfC,OAAa;IAEb,OAAO,IAAI,CAACZ,IAAI,CAACa,GAAG,CAAoB,GAAG,IAAI,CAACZ,MAAM,YAAY,EAAE;MAClEa,MAAM,EAAE;QACNR,MAAM;QACNK,SAAS,EAAEA,SAAS,CAACI,WAAW,EAAE;QAClCH,OAAO,EAAEA,OAAO,CAACG,WAAW;;KAE/B,CAAC;EACJ;EAEA;;;EAGAC,oBAAoBA,CAACV,MAAc,EAAEC,IAAU;IAC7C,OAAO,IAAI,CAACP,IAAI,CAACa,GAAG,CAAM,GAAG,IAAI,CAACZ,MAAM,aAAa,EAAE;MACrDa,MAAM,EAAE;QACNR,MAAM;QACNC,IAAI,EAAEA,IAAI,CAACQ,WAAW;;KAEzB,CAAC;EACJ;EAEA;;;EAGAE,oBAAoBA,CAACV,IAAU;IAC7B,OAAO,IAAI,CAACP,IAAI,CAACS,IAAI,CAAoB,GAAG,IAAI,CAACR,MAAM,gBAAgB,EAAE;MACvEM;KACD,CAAC;EACJ;EAEA;;;EAGAW,uBAAuBA,CAACX,IAAU;IAChC,OAAO,IAAI,CAACP,IAAI,CAACS,IAAI,CACnB,GAAG,IAAI,CAACR,MAAM,mBAAmB,EACjC;MAAEM;IAAI,CAAE,CACT;EACH;EAEA;;;EAGAY,sBAAsBA,CAACb,MAAc;IACnC,OAAO,IAAI,CAACN,IAAI,CAACa,GAAG,CAClB,GAAG,IAAI,CAACZ,MAAM,aAAaK,MAAM,EAAE,CACpC;EACH;;;uBA7EWR,cAAc,EAAAsB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAdzB,cAAc;MAAA0B,OAAA,EAAd1B,cAAc,CAAA2B,IAAA;MAAAC,UAAA,EAFb;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}