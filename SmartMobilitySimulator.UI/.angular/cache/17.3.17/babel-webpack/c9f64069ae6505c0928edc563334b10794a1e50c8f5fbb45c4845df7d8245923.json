{"ast":null,"code":"import html2canvas from \"html2canvas\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/simulation.service\";\nimport * as i2 from \"../../services/zone.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../date-time-picker/date-time-picker.component\";\nfunction SimulationControlsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\\u2717 \", ctx_r1.error, \"\");\n  }\n}\nfunction SimulationControlsComponent_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_button_10_Template_button_click_0_listener() {\n      const scenario_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.applyScenario(scenario_r4.name));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const scenario_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", scenario_r4.name, \" \");\n  }\n}\nfunction SimulationControlsComponent_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const zone_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", zone_r5.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", zone_r5.name, \" (\", zone_r5.emirate, \") \");\n  }\n}\nfunction SimulationControlsComponent_div_48_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtext(1, \"Loading impact...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SimulationControlsComponent_div_48_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 35)(2, \"span\");\n    i0.ɵɵtext(3, \"NPV (5 yrs):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"strong\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 35)(8, \"span\");\n    i0.ɵɵtext(9, \"Annual Revenue:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 35)(14, \"span\");\n    i0.ɵɵtext(15, \"Productivity Gain (daily):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"strong\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 35)(20, \"span\");\n    i0.ɵɵtext(21, \"Equity (Low vs High):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"strong\");\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"number\");\n    i0.ɵɵpipe(25, \"number\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"AED \", i0.ɵɵpipeBind1(6, 5, ctx_r1.economicImpact.revenueProjection.npv), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"AED \", i0.ɵɵpipeBind1(12, 7, ctx_r1.economicImpact.revenueProjection.baseAnnualRevenue), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"AED \", i0.ɵɵpipeBind1(18, 9, ctx_r1.economicImpact.productivity.dailyProductivityGainAed), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(24, 11, ctx_r1.economicImpact.equity.lowIncomeBurden, \"1.2-2\"), \"% / \", i0.ɵɵpipeBind2(25, 14, ctx_r1.economicImpact.equity.highIncomeBurden, \"1.2-2\"), \"%\");\n  }\n}\nfunction SimulationControlsComponent_div_48_li_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const assumption_r7 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(assumption_r7);\n  }\n}\nfunction SimulationControlsComponent_div_48_div_136_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const warning_r8 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.getWarningCategory(warning_r8), \":\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", warning_r8, \" \");\n  }\n}\nfunction SimulationControlsComponent_div_48_div_136_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"h4\");\n    i0.ɵɵtext(2, \"Warnings & Validation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\");\n    i0.ɵɵtemplate(4, SimulationControlsComponent_div_48_div_136_li_4_Template, 4, 2, \"li\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 37);\n    i0.ɵɵtext(6, \" Warnings are informational and do not block the simulation. \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.warnings);\n  }\n}\nfunction SimulationControlsComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 27)(2, \"div\", 28)(3, \"h4\");\n    i0.ɵɵtext(4, \"Total Vehicles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 28)(9, \"h4\");\n    i0.ɵɵtext(10, \"Diverted Vehicles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 14);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 28)(15, \"h4\");\n    i0.ɵɵtext(16, \"Congestion Reduction\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 14);\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 28)(21, \"h4\");\n    i0.ɵɵtext(22, \"Estimated Revenue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\", 14);\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 28)(27, \"h4\");\n    i0.ɵɵtext(28, \"CO\\u2082 Reduction\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"p\", 14);\n    i0.ɵɵtext(30);\n    i0.ɵɵpipe(31, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"div\", 28)(33, \"h4\");\n    i0.ɵɵtext(34, \"Equity Impact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"p\", 14);\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(37, \"div\", 29)(38, \"h4\");\n    i0.ɵɵtext(39, \"Economic Impact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(40, SimulationControlsComponent_div_48_div_40_Template, 2, 0, \"div\", 30)(41, SimulationControlsComponent_div_48_div_41_Template, 26, 17, \"div\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"div\", 32)(43, \"details\", 33)(44, \"summary\");\n    i0.ɵɵtext(45, \"Assumptions & Confidence\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(46, \"div\", 34)(47, \"div\", 35)(48, \"span\");\n    i0.ɵɵtext(49, \"Confidence (qualitative):\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"strong\");\n    i0.ɵɵtext(51);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(52, \"div\", 35)(53, \"span\");\n    i0.ɵɵtext(54, \"Data provenance:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(55, \"strong\");\n    i0.ɵɵtext(56);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(57, \"div\", 35)(58, \"span\");\n    i0.ɵɵtext(59, \"Assumptions:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(60, \"ul\");\n    i0.ɵɵtemplate(61, SimulationControlsComponent_div_48_li_61_Template, 2, 1, \"li\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(62, \"p\", 37);\n    i0.ɵɵtext(63, \" Outputs are directional estimates for sandbox use only. \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(64, \"div\", 33)(65, \"h4\");\n    i0.ɵɵtext(66, \"Baseline vs Policy Comparison\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(67, \"table\", 38)(68, \"thead\")(69, \"tr\");\n    i0.ɵɵelement(70, \"th\");\n    i0.ɵɵelementStart(71, \"th\");\n    i0.ɵɵtext(72, \"Baseline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(73, \"th\");\n    i0.ɵɵtext(74, \"Policy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(75, \"th\");\n    i0.ɵɵtext(76, \"Delta\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(77, \"tbody\")(78, \"tr\")(79, \"td\");\n    i0.ɵɵtext(80, \"Revenue (AED)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(81, \"td\");\n    i0.ɵɵtext(82, \"Not available\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(83, \"td\");\n    i0.ɵɵtext(84);\n    i0.ɵɵpipe(85, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(86, \"td\");\n    i0.ɵɵtext(87, \"\\u2014\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(88, \"tr\")(89, \"td\");\n    i0.ɵɵtext(90, \"Congestion proxy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(91, \"td\");\n    i0.ɵɵtext(92);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(93, \"td\");\n    i0.ɵɵtext(94);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(95, \"td\");\n    i0.ɵɵtext(96);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(97, \"tr\")(98, \"td\");\n    i0.ɵɵtext(99, \"Equity impact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(100, \"td\");\n    i0.ɵɵtext(101, \"Not available\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(102, \"td\");\n    i0.ɵɵtext(103);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(104, \"td\");\n    i0.ɵɵtext(105, \"\\u2014\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(106, \"tr\")(107, \"td\");\n    i0.ɵɵtext(108, \"Compliance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(109, \"td\");\n    i0.ɵɵtext(110, \"Not available\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(111, \"td\");\n    i0.ɵɵtext(112);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(113, \"td\");\n    i0.ɵɵtext(114, \"\\u2014\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(115, \"p\", 37);\n    i0.ɵɵtext(116, \" Baseline values shown when provided; otherwise marked as not available. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(117, \"div\", 33)(118, \"h4\");\n    i0.ɵɵtext(119, \"Data Coverage\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(120, \"div\", 35)(121, \"span\");\n    i0.ɵɵtext(122, \"Movements used:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(123, \"strong\");\n    i0.ɵɵtext(124);\n    i0.ɵɵpipe(125, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(126, \"div\", 35)(127, \"span\");\n    i0.ɵɵtext(128, \"Fallback usage:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(129, \"strong\");\n    i0.ɵɵtext(130);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(131, \"div\", 35)(132, \"span\");\n    i0.ɵɵtext(133, \"Missing data warnings:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(134, \"strong\");\n    i0.ɵɵtext(135);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(136, SimulationControlsComponent_div_48_div_136_Template, 7, 1, \"div\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(137, \"div\", 40)(138, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_48_Template_button_click_138_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.exportResult(\"pdf\"));\n    });\n    i0.ɵɵtext(139, \" Export PDF \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(140, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_48_Template_button_click_140_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.downloadInvestorReport());\n    });\n    i0.ɵɵtext(141, \" Download Investor Report \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(142, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_48_Template_button_click_142_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.exportResult(\"csv\"));\n    });\n    i0.ɵɵtext(143, \" Export CSV \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(144, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_48_Template_button_click_144_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.exportResult(\"json\"));\n    });\n    i0.ɵɵtext(145, \" Export JSON \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    let tmp_15_0;\n    let tmp_16_0;\n    let tmp_19_0;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 23, ctx_r1.result.totalVehicles));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 25, ctx_r1.result.vehiclesDiverted));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(19, 27, ctx_r1.result.congestionReduction, \"1.1-1\"), \"% \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"AED \", i0.ɵɵpipeBind1(25, 30, ctx_r1.result.estimatedRevenue), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(31, 32, ctx_r1.result.environmentalImpact), \" kg\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"regressive\", ctx_r1.equityDisplay.isRegressive);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.equityDisplay.isRegressive ? \"\\u26A0\\uFE0F Regressive\" : \"\\u2713 Fair\", \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isEconomicLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isEconomicLoading && ctx_r1.economicImpact);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r1.confidenceLabel);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.dataProvenance);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.assumptions);\n    i0.ɵɵadvance(23);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(85, 34, ctx_r1.result.estimatedRevenue));\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", (tmp_15_0 = ctx_r1.baselinePolicy.baseline == null ? null : ctx_r1.baselinePolicy.baseline.congestionLevel) !== null && tmp_15_0 !== undefined ? tmp_15_0 : \"N/A\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (tmp_16_0 = ctx_r1.baselinePolicy.policy == null ? null : ctx_r1.baselinePolicy.policy.congestionLevel) !== null && tmp_16_0 !== undefined ? tmp_16_0 : \"N/A\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.formatDelta(ctx_r1.baselinePolicy.delta == null ? null : ctx_r1.baselinePolicy.delta.congestionLevel), \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.equityDisplay.isRegressive ? \"Regressive\" : \"Not regressive\", \" \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\" \", (tmp_19_0 = ctx_r1.result.complianceRate) !== null && tmp_19_0 !== undefined ? tmp_19_0 : \"Not available\", \" \");\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(125, 36, ctx_r1.movementCount));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.warnings.join(\" \").toLowerCase().includes(\"fallback\") ? \"Yes\" : \"No\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.warnings.length > 0 ? \"Yes\" : \"No\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.warnings.length > 0);\n  }\n}\nfunction SimulationControlsComponent_ng_template_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 43);\n    i0.ɵɵtext(1, \"Run a simulation to see results here.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SimulationControlsComponent_div_51_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 56)(1, \"div\", 28)(2, \"h4\");\n    i0.ɵɵtext(3, \"Revenue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 14);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 28)(8, \"h4\");\n    i0.ɵɵtext(9, \"Congestion\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 14);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 28)(14, \"h4\");\n    i0.ɵɵtext(15, \"Vehicles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\", 14);\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 28)(20, \"h4\");\n    i0.ɵɵtext(21, \"NPV\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\", 14);\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"number\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"AED \", i0.ɵɵpipeBind1(6, 4, ctx_r1.result.estimatedRevenue), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(12, 6, ctx_r1.result.congestionReduction, \"1.1-1\"), \"% \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 9, ctx_r1.result.totalVehicles));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" AED \", i0.ɵɵpipeBind1(24, 11, ctx_r1.economicImpact == null ? null : ctx_r1.economicImpact.revenueProjection == null ? null : ctx_r1.economicImpact.revenueProjection.npv), \" \");\n  }\n}\nfunction SimulationControlsComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"div\", 45)(2, \"h2\");\n    i0.ɵɵtext(3, \"Smart Mobility Demo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 46);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 47);\n    i0.ɵɵelement(7, \"div\", 48);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 49);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\", 50);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 51)(13, \"div\")(14, \"span\", 52);\n    i0.ɵɵtext(15, \"Scenario:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"strong\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\")(19, \"span\", 52);\n    i0.ɵɵtext(20, \"Auto-run:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"strong\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\")(24, \"span\", 52);\n    i0.ɵɵtext(25, \"Full screen:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"strong\");\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(28, SimulationControlsComponent_div_51_div_28_Template, 25, 13, \"div\", 53);\n    i0.ɵɵelementStart(29, \"div\", 54)(30, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_51_Template_button_click_30_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.previousPresentationStep());\n    });\n    i0.ɵɵtext(31, \" Previous \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_51_Template_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.nextPresentationStep());\n    });\n    i0.ɵɵtext(33, \" Next \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_51_Template_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleScenarioAutoRun());\n    });\n    i0.ɵɵtext(35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_51_Template_button_click_36_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.toggleFullScreen());\n    });\n    i0.ɵɵtext(37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_51_Template_button_click_38_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.exportPresentationVideo());\n    });\n    i0.ɵɵtext(39, \" Export Presentation Video \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"button\", 55);\n    i0.ɵɵlistener(\"click\", function SimulationControlsComponent_div_51_Template_button_click_40_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.stopPresentation());\n    });\n    i0.ɵɵtext(41, \" Exit Presentation \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\" Step \", ctx_r1.presentationStep + 1, \" of \", ctx_r1.presentationScript.length, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", (ctx_r1.presentationStep + 1) / ctx_r1.presentationScript.length * 100, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.presentationScript[ctx_r1.presentationStep].title, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.presentationScript[ctx_r1.presentationStep].text, \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.currentScenarioLabel || \"Manual\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.autoRunScenarios ? \"On\" : \"Off\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.isFullScreen ? \"On\" : \"Off\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.result);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.autoRunScenarios ? \"Stop Auto-run\" : \"Auto-run Scenarios\", \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isFullScreen ? \"Exit Full Screen\" : \"Full Screen\", \" \");\n  }\n}\nexport let SimulationControlsComponent = /*#__PURE__*/(() => {\n  class SimulationControlsComponent {\n    constructor(simulationService, zoneService) {\n      this.simulationService = simulationService;\n      this.zoneService = zoneService;\n      this.zones = [];\n      this.selectedZoneId = \"\";\n      this.simulationDate = new Date().toISOString().split(\"T\")[0];\n      this.simulationDateTime = new Date();\n      // Zone rules\n      this.peakMultiplier = 1.5;\n      this.diversionThreshold = 60;\n      this.exemptionsEnabled = true;\n      this.freeHours = 0;\n      this.customChargePerHour = null;\n      this.scenarioExemptions = null;\n      this.isRunning = false;\n      this.result = null;\n      this.economicImpact = null;\n      this.isEconomicLoading = false;\n      this.error = null;\n      this.presentationMode = false;\n      this.presentationStep = 0;\n      this.presentationScript = [{\n        title: \"UAE Congestion Challenge\",\n        text: \"UAE cities lose billions of dirhams each year to congestion and delays.\",\n        duration: 5500\n      }, {\n        title: \"Smart Mobility Pricing\",\n        text: \"Pricing targets the worst bottlenecks with fair exemptions and guardrails.\",\n        duration: 5500\n      }, {\n        title: \"Pilot Scenario\",\n        text: \"Mussafah pilot reduces congestion while generating sustainable revenue.\",\n        duration: 6000\n      }, {\n        title: \"Economic Impact\",\n        text: \"Productivity gains and a positive equity balance support wider adoption.\",\n        duration: 6000\n      }, {\n        title: \"Nationwide Rollout\",\n        text: \"Phased expansion delivers strong ROI and measurable mobility gains.\",\n        duration: 6000\n      }];\n      this.presentationScenarioQueue = [\"Demo Scenario\", \"Solve School Run Chaos\", \"Weekend Marina Gridlock\", \"Sharjah-Dubai Commuter Solution\"];\n      this.currentScenarioLabel = \"\";\n      this.autoRunScenarios = true;\n      this.isFullScreen = false;\n      this.presentationTimer = null;\n      this.scenarioTimer = null;\n      this.scenarios = [{\n        name: \"Demo Scenario\",\n        zoneName: \"Musaffah Industrial\",\n        freeHours: 2,\n        chargePerHour: 30,\n        exemptions: [\"Commercial\", \"Emergency\"],\n        description: \"Pilot congestion pricing in Mussafah industrial zone.\"\n      }, {\n        name: \"Solve School Run Chaos\",\n        zoneName: \"Academic City\",\n        freeHours: 1,\n        chargePerHour: 20,\n        exemptions: [\"Public Transport\", \"Emergency\"],\n        description: \"Target school commute peaks with mild pricing.\"\n      }, {\n        name: \"Weekend Marina Gridlock\",\n        zoneName: \"Dubai Marina\",\n        freeHours: 1,\n        chargePerHour: 35,\n        exemptions: [\"Public Transport\", \"Emergency\"],\n        description: \"Weekend surcharge to reduce marina congestion.\"\n      }, {\n        name: \"Sharjah-Dubai Commuter Solution\",\n        zoneName: \"Al Qusais\",\n        freeHours: 2,\n        chargePerHour: 25,\n        exemptions: [\"Public Transport\", \"Commercial\", \"Emergency\"],\n        description: \"Shift commuter demand with targeted pricing.\"\n      }];\n    }\n    ngOnInit() {\n      this.loadZones();\n    }\n    get equityDisplay() {\n      return this.normalizeEquity(this.result?.equityImpact);\n    }\n    get warnings() {\n      if (!this.result) return [];\n      const direct = Array.isArray(this.result.warnings) ? this.result.warnings : [];\n      const fromResults = Array.isArray(this.result.results?.warnings) ? this.result.results.warnings : [];\n      return [...new Set([...direct, ...fromResults])];\n    }\n    get assumptions() {\n      if (!this.result) return [];\n      return Array.isArray(this.result.results?.assumptions) ? this.result.results.assumptions : [\"Average trip distance assumed at 10 km.\", \"CO₂ savings estimated per minute saved.\", \"Compliance uses a heuristic (not calibrated).\", \"Diversion rules are threshold-based, not a demand model.\"];\n    }\n    get confidenceLabel() {\n      return this.getConfidenceLabel(this.result?.confidenceScore);\n    }\n    get dataProvenance() {\n      if (!this.result) return \"Not available\";\n      const warningText = this.warnings.join(\" \").toLowerCase();\n      if (warningText.includes(\"no vehicle movements\")) return \"Insufficient data (no movements for date).\";\n      if (warningText.includes(\"fallback\")) return \"Fallback baseline window used.\";\n      if (this.result.totalVehicles > 0) return \"Replayed from stored movements (not real-time).\";\n      return \"Not provided by backend.\";\n    }\n    get movementCount() {\n      return this.result?.totalVehicles ?? 0;\n    }\n    get baselinePolicy() {\n      if (!this.result) {\n        return {\n          baseline: null,\n          policy: null,\n          delta: null\n        };\n      }\n      const baseline = this.result.results?.baseline ?? {\n        averageSpeed: this.result.baselineAverageSpeed,\n        congestionLevel: this.result.baselineCongestionLevel\n      };\n      const policy = this.result.results?.policy ?? {\n        averageSpeed: this.result.projectedAverageSpeed,\n        congestionLevel: this.result.projectedCongestionLevel\n      };\n      const delta = this.result.results?.delta ?? null;\n      return {\n        baseline,\n        policy,\n        delta\n      };\n    }\n    loadZones() {\n      this.zoneService.getAllZones().subscribe({\n        next: zones => {\n          this.zones = zones;\n          if (zones.length > 0) {\n            this.selectedZoneId = zones[0].id;\n          }\n        },\n        error: err => {\n          this.error = \"Failed to load zones\";\n        }\n      });\n    }\n    runSimulation() {\n      if (!this.selectedZoneId) {\n        this.error = \"Please select a zone\";\n        return;\n      }\n      this.isRunning = true;\n      this.error = null;\n      const exemptions = this.scenarioExemptions ?? (this.exemptionsEnabled ? [\"Public Transport\", \"Commercial\", \"Emergency\", \"Diplomatic\"] : []);\n      const request = {\n        zoneId: this.selectedZoneId,\n        date: this.simulationDateTime,\n        zoneRules: {\n          peakMultiplier: this.peakMultiplier,\n          diversionThreshold: this.diversionThreshold,\n          exemptions,\n          freeHours: this.freeHours,\n          customChargePerHour: this.customChargePerHour ?? undefined\n        }\n      };\n      this.simulationService.runSimulation(request).subscribe({\n        next: result => {\n          this.result = result;\n          this.loadEconomicImpact(result.id);\n          this.isRunning = false;\n        },\n        error: err => {\n          this.error = \"Failed to run simulation\";\n          this.isRunning = false;\n          console.error(err);\n        }\n      });\n    }\n    getConfidenceLabel(score) {\n      if (score === null || score === undefined) return \"Not provided\";\n      if (score < 0.4) return \"Low\";\n      if (score < 0.7) return \"Medium\";\n      return \"High\";\n    }\n    formatDelta(value, unit = \"\") {\n      if (value === null || value === undefined || Number.isNaN(value)) return \"—\";\n      const arrow = value > 0 ? \"↑\" : value < 0 ? \"↓\" : \"→\";\n      const abs = Math.abs(value);\n      return `${arrow} ${abs.toFixed(2)}${unit}`;\n    }\n    getWarningCategory(text) {\n      const lower = text.toLowerCase();\n      if (lower.includes(\"no vehicle movements\") || lower.includes(\"fallback\") || lower.includes(\"out of range\") || lower.includes(\"clamped\")) {\n        return \"Caution\";\n      }\n      return \"Info\";\n    }\n    normalizeEquity(equity) {\n      if (equity && typeof equity === \"object\") {\n        return {\n          lowIncomeBurden: Number(equity.lowIncomeBurden ?? 0),\n          highIncomeBurden: Number(equity.highIncomeBurden ?? 0),\n          burdenRatio: Number(equity.burdenRatio ?? 0),\n          isRegressive: Boolean(equity.isRegressive ?? false)\n        };\n      }\n      if (typeof equity === \"number\") {\n        return {\n          lowIncomeBurden: 0,\n          highIncomeBurden: 0,\n          burdenRatio: equity,\n          isRegressive: false,\n          note: \"Equity detail not provided; showing aggregate score only.\"\n        };\n      }\n      return {\n        lowIncomeBurden: 0,\n        highIncomeBurden: 0,\n        burdenRatio: 0,\n        isRegressive: false,\n        note: \"Equity detail not available.\"\n      };\n    }\n    exportResult(format) {\n      if (!this.result) return;\n      this.simulationService.exportSimulationReport(this.result.id, format).subscribe({\n        next: blob => {\n          const url = window.URL.createObjectURL(blob);\n          const a = document.createElement(\"a\");\n          a.href = url;\n          a.download = `simulation-${this.result?.id}.${format}`;\n          a.click();\n          window.URL.revokeObjectURL(url);\n        },\n        error: err => {\n          this.error = `Failed to export ${format.toUpperCase()}`;\n        }\n      });\n    }\n    downloadInvestorReport() {\n      if (!this.result) return;\n      this.simulationService.getInvestorReport(this.result.id).subscribe({\n        next: blob => {\n          const url = window.URL.createObjectURL(blob);\n          const a = document.createElement(\"a\");\n          a.href = url;\n          a.download = `investor-report-${this.result?.id}.pdf`;\n          a.click();\n          window.URL.revokeObjectURL(url);\n        },\n        error: () => {\n          this.error = \"Failed to download investor report\";\n        }\n      });\n    }\n    loadEconomicImpact(simulationId) {\n      this.isEconomicLoading = true;\n      this.economicImpact = null;\n      this.simulationService.getEconomicImpact(simulationId).subscribe({\n        next: impact => {\n          this.economicImpact = impact;\n          this.isEconomicLoading = false;\n        },\n        error: () => {\n          this.isEconomicLoading = false;\n        }\n      });\n    }\n    applyScenario(scenarioName, runNow = true) {\n      const scenario = this.scenarios.find(s => s.name === scenarioName);\n      if (!scenario) return;\n      const zone = this.zones.find(z => z.name === scenario.zoneName);\n      if (zone) {\n        this.selectedZoneId = zone.id;\n      }\n      this.freeHours = scenario.freeHours;\n      this.customChargePerHour = scenario.chargePerHour;\n      this.scenarioExemptions = scenario.exemptions;\n      if (runNow) {\n        this.runSimulation();\n      }\n    }\n    startPresentation() {\n      this.presentationMode = true;\n      this.presentationStep = 0;\n      this.currentScenarioLabel = this.presentationScenarioQueue[0] ?? \"\";\n      this.applyScenario(this.currentScenarioLabel, true);\n      this.startAutoPlay();\n      this.runScenarioSequence();\n    }\n    stopPresentation() {\n      this.presentationMode = false;\n      this.presentationStep = 0;\n      if (this.presentationTimer) {\n        window.clearTimeout(this.presentationTimer);\n        this.presentationTimer = null;\n      }\n      if (this.scenarioTimer) {\n        window.clearTimeout(this.scenarioTimer);\n        this.scenarioTimer = null;\n      }\n      if (window.speechSynthesis) {\n        window.speechSynthesis.cancel();\n      }\n      this.exitFullScreen();\n    }\n    startAutoPlay() {\n      const playStep = index => {\n        this.presentationStep = index;\n        const entry = this.presentationScript[index];\n        if (entry?.text) {\n          this.speak(entry.text);\n        }\n        if (index < this.presentationScript.length - 1) {\n          const duration = entry?.duration ?? 6000;\n          this.presentationTimer = window.setTimeout(() => playStep(index + 1), duration);\n        }\n      };\n      playStep(0);\n    }\n    nextPresentationStep() {\n      const next = Math.min(this.presentationStep + 1, this.presentationScript.length - 1);\n      this.presentationStep = next;\n      const entry = this.presentationScript[next];\n      if (entry?.text) {\n        this.speak(entry.text);\n      }\n    }\n    previousPresentationStep() {\n      const prev = Math.max(this.presentationStep - 1, 0);\n      this.presentationStep = prev;\n      const entry = this.presentationScript[prev];\n      if (entry?.text) {\n        this.speak(entry.text);\n      }\n    }\n    toggleScenarioAutoRun() {\n      this.autoRunScenarios = !this.autoRunScenarios;\n      if (this.autoRunScenarios) {\n        this.runScenarioSequence();\n      } else if (this.scenarioTimer) {\n        window.clearTimeout(this.scenarioTimer);\n        this.scenarioTimer = null;\n      }\n    }\n    toggleFullScreen() {\n      if (document.fullscreenElement) {\n        this.exitFullScreen();\n      } else {\n        this.enterFullScreen();\n      }\n    }\n    enterFullScreen() {\n      const root = document.getElementById(\"presentation-root\");\n      if (root?.requestFullscreen) {\n        root.requestFullscreen();\n        this.isFullScreen = true;\n      }\n    }\n    exitFullScreen() {\n      if (document.fullscreenElement && document.exitFullscreen) {\n        document.exitFullscreen();\n      }\n      this.isFullScreen = false;\n    }\n    runScenarioSequence() {\n      if (!this.autoRunScenarios || this.presentationScenarioQueue.length === 0) {\n        return;\n      }\n      const runScenarioAt = index => {\n        if (!this.autoRunScenarios) return;\n        const scenarioName = this.presentationScenarioQueue[index];\n        this.currentScenarioLabel = scenarioName;\n        this.applyScenario(scenarioName, true);\n        if (index < this.presentationScenarioQueue.length - 1) {\n          this.scenarioTimer = window.setTimeout(() => runScenarioAt(index + 1), 12000);\n        }\n      };\n      runScenarioAt(0);\n    }\n    exportPresentationVideo() {\n      const target = document.getElementById(\"presentation-root\");\n      if (!target) return;\n      html2canvas(target).then(canvas => {\n        const stream = canvas.captureStream(30);\n        const recorder = new MediaRecorder(stream, {\n          mimeType: \"video/webm\"\n        });\n        const chunks = [];\n        recorder.ondataavailable = event => {\n          if (event.data.size > 0) chunks.push(event.data);\n        };\n        recorder.onstop = () => {\n          const blob = new Blob(chunks, {\n            type: \"video/webm\"\n          });\n          const url = URL.createObjectURL(blob);\n          const a = document.createElement(\"a\");\n          a.href = url;\n          a.download = \"presentation.webm\";\n          a.click();\n          URL.revokeObjectURL(url);\n        };\n        recorder.start();\n        window.setTimeout(() => recorder.stop(), 5000);\n      });\n    }\n    speak(text) {\n      if (!window.speechSynthesis) return;\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.rate = 1;\n      utterance.pitch = 1;\n      window.speechSynthesis.cancel();\n      window.speechSynthesis.speak(utterance);\n    }\n    static {\n      this.ɵfac = function SimulationControlsComponent_Factory(t) {\n        return new (t || SimulationControlsComponent)(i0.ɵɵdirectiveInject(i1.SimulationService), i0.ɵɵdirectiveInject(i2.ZoneService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SimulationControlsComponent,\n        selectors: [[\"app-simulation-controls\"]],\n        decls: 52,\n        vars: 18,\n        consts: [[\"emptyResults\", \"\"], [1, \"controls-container\"], [\"class\", \"error-message\", 4, \"ngIf\"], [1, \"controls-layout\"], [1, \"control-panel\"], [1, \"form-group\"], [1, \"scenario-buttons\"], [\"type\", \"button\", \"class\", \"btn-scenario\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"zoneId\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"simulationDateTime\", 3, \"ngModelChange\", \"label\", \"timeLabel\", \"showQuickActions\", \"ngModel\"], [1, \"range-control\"], [\"type\", \"range\", \"name\", \"peakMultiplier\", \"min\", \"1\", \"max\", \"3\", \"step\", \"0.1\", 3, \"ngModelChange\", \"ngModel\"], [1, \"value\"], [\"type\", \"range\", \"name\", \"threshold\", \"min\", \"30\", \"max\", \"120\", \"step\", \"5\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-group\", \"checkbox\"], [\"type\", \"checkbox\", \"name\", \"exemptions\", 3, \"ngModelChange\", \"ngModel\"], [1, \"actions\"], [1, \"btn-run\", 3, \"click\", \"disabled\"], [\"type\", \"button\", 1, \"btn-run\", \"secondary\", 3, \"click\"], [1, \"results-preview\"], [4, \"ngIf\", \"ngIfElse\"], [\"id\", \"presentation-root\", \"class\", \"presentation-overlay\", 4, \"ngIf\"], [1, \"error-message\"], [\"type\", \"button\", 1, \"btn-scenario\", 3, \"click\"], [3, \"value\"], [1, \"metrics-grid\"], [1, \"metric\"], [1, \"economic-impact\"], [\"class\", \"loading\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"credibility-panels\"], [1, \"credibility-panel\"], [1, \"panel-body\"], [1, \"impact-row\"], [4, \"ngFor\", \"ngForOf\"], [1, \"disclaimer\"], [1, \"comparison-table\"], [\"class\", \"credibility-panel\", 4, \"ngIf\"], [1, \"export-actions\"], [1, \"btn-export\", 3, \"click\"], [1, \"loading\"], [1, \"empty-results\"], [\"id\", \"presentation-root\", 1, \"presentation-overlay\"], [1, \"presentation-card\"], [1, \"presentation-step\"], [1, \"presentation-progress\"], [1, \"presentation-progress-bar\"], [1, \"presentation-title\"], [1, \"presentation-text\"], [1, \"presentation-status\"], [1, \"label\"], [\"class\", \"presentation-metrics\", 4, \"ngIf\"], [1, \"presentation-actions\"], [1, \"btn-export\", \"secondary\", 3, \"click\"], [1, \"presentation-metrics\"]],\n        template: function SimulationControlsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"h2\");\n            i0.ɵɵtext(2, \"Simulation Controls\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(3, SimulationControlsComponent_div_3_Template, 2, 1, \"div\", 2);\n            i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"label\");\n            i0.ɵɵtext(8, \"Scenarios\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 6);\n            i0.ɵɵtemplate(10, SimulationControlsComponent_button_10_Template, 2, 1, \"button\", 7);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\");\n            i0.ɵɵtext(13, \"Select Zone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"select\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SimulationControlsComponent_Template_select_ngModelChange_14_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.selectedZoneId, $event) || (ctx.selectedZoneId = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementStart(15, \"option\", 9);\n            i0.ɵɵtext(16, \"-- Select a Zone --\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(17, SimulationControlsComponent_option_17_Template, 2, 3, \"option\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"div\", 5)(19, \"label\");\n            i0.ɵɵtext(20, \"Simulation Date & Time\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"app-date-time-picker\", 11);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SimulationControlsComponent_Template_app_date_time_picker_ngModelChange_21_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.simulationDateTime, $event) || (ctx.simulationDateTime = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(22, \"div\", 5)(23, \"label\");\n            i0.ɵɵtext(24, \"Peak Hour Multiplier\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"div\", 12)(26, \"input\", 13);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SimulationControlsComponent_Template_input_ngModelChange_26_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.peakMultiplier, $event) || (ctx.peakMultiplier = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"span\", 14);\n            i0.ɵɵtext(28);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(29, \"div\", 5)(30, \"label\");\n            i0.ɵɵtext(31, \"Diversion Threshold (minutes)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"div\", 12)(33, \"input\", 15);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SimulationControlsComponent_Template_input_ngModelChange_33_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.diversionThreshold, $event) || (ctx.diversionThreshold = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"span\", 14);\n            i0.ɵɵtext(35);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(36, \"div\", 16)(37, \"label\")(38, \"input\", 17);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SimulationControlsComponent_Template_input_ngModelChange_38_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.exemptionsEnabled, $event) || (ctx.exemptionsEnabled = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(39, \" Enable Exemptions (Public Transport, Commercial, Emergency, Diplomatic) \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(40, \"div\", 18)(41, \"button\", 19);\n            i0.ɵɵlistener(\"click\", function SimulationControlsComponent_Template_button_click_41_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.runSimulation());\n            });\n            i0.ɵɵtext(42);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(43, \"button\", 20);\n            i0.ɵɵlistener(\"click\", function SimulationControlsComponent_Template_button_click_43_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.startPresentation());\n            });\n            i0.ɵɵtext(44, \" Presentation Mode \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(45, \"div\", 21)(46, \"h3\");\n            i0.ɵɵtext(47, \"Quick Results\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(48, SimulationControlsComponent_div_48_Template, 146, 38, \"div\", 22)(49, SimulationControlsComponent_ng_template_49_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(51, SimulationControlsComponent_div_51_Template, 42, 12, \"div\", 23);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            const emptyResults_r10 = i0.ɵɵreference(50);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.scenarios);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedZoneId);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.zones);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"label\", \"Simulation Date\")(\"timeLabel\", \"Time\")(\"showQuickActions\", true);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.simulationDateTime);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.peakMultiplier);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\"\", ctx.peakMultiplier.toFixed(1), \"x\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.diversionThreshold);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\"\", ctx.diversionThreshold, \" min\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.exemptionsEnabled);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"disabled\", ctx.isRunning || !ctx.selectedZoneId);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isRunning ? \"Running Simulation...\" : \"Run Simulation\", \" \");\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.result)(\"ngIfElse\", emptyResults_r10);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.presentationMode);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.RangeValueAccessor, i4.CheckboxControlValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, i5.DateTimePickerComponent, i3.DecimalPipe],\n        styles: [\".controls-container[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:20px;padding:2rem;box-shadow:0 8px 32px #00000014;border:1px solid rgba(255,255,255,.5);animation:_ngcontent-%COMP%_slideUp .5s ease-out}.controls-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem}.controls-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:\\\"\\\";width:4px;height:24px;background:linear-gradient(180deg,#0d47a1,#f59e0b);border-radius:4px}.error-message[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#dc2626;padding:1rem 1.25rem;border-radius:12px;margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem;font-weight:500;border:1px solid #FCA5A5}.controls-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:400px 1fr;gap:2rem}@media (max-width: 1024px){.controls-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}.control-panel[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#f8fafc);border-radius:16px;padding:1.5rem;border:1px solid #E2E8F0}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#374151;margin-bottom:.5rem;font-size:.9rem}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:.95rem;background:#fff;border:2px solid #E2E8F0;border-radius:10px;color:#1f2937;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{outline:none;border-color:#0d47a1;box-shadow:0 0 0 4px #0d47a11a}.scenario-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.btn-scenario[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#fff;border:2px solid #E2E8F0;border-radius:8px;font-size:.85rem;font-weight:500;color:#475569;cursor:pointer;transition:all .2s ease}.btn-scenario[_ngcontent-%COMP%]:hover{border-color:#0d47a1;color:#0d47a1;background:#0d47a10d}.range-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.range-control[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{flex:1;height:8px;background:#e2e8f0;border-radius:4px;-webkit-appearance:none}.range-control[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;background:linear-gradient(135deg,#0d47a1,#1565c0);border-radius:50%;cursor:pointer;box-shadow:0 2px 8px #0d47a14d}.range-control[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{min-width:60px;padding:.375rem .75rem;background:linear-gradient(135deg,#0d47a1,#1565c0);color:#fff;border-radius:6px;font-weight:600;font-size:.85rem;text-align:center}.form-group.checkbox[_ngcontent-%COMP%]{display:flex;align-items:center}.form-group.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer;font-weight:500;color:#374151}.form-group.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;accent-color:#0D47A1;cursor:pointer}.actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #E2E8F0}.btn-run[_ngcontent-%COMP%]{flex:1;padding:.875rem 1.5rem;background:linear-gradient(135deg,#0d47a1,#1565c0);color:#fff;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 4px 12px #0d47a14d}.btn-run[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #0d47a166}.btn-run[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-run.secondary[_ngcontent-%COMP%]{background:#fff;color:#0d47a1;border:2px solid #0D47A1;box-shadow:none}.btn-run.secondary[_ngcontent-%COMP%]:hover{background:#0d47a1;color:#fff}.results-preview[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#f8fafc);border-radius:16px;padding:1.5rem;border:1px solid #E2E8F0}.results-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a;margin-bottom:1.25rem;display:flex;align-items:center;gap:.5rem}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:1.5rem}.metric[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;border:1px solid #E2E8F0;transition:all .2s ease}.metric[_ngcontent-%COMP%]:hover{border-color:#f59e0b;transform:translateY(-2px);box-shadow:0 4px 12px #00000014}.metric[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.8rem;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px;margin-bottom:.5rem}.metric[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;color:#0d47a1}.metric.regressive[_ngcontent-%COMP%]{border-left:4px solid #EF4444}.metric.regressive[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#ef4444}.economic-impact[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:1.25rem;margin-bottom:1.5rem;border:1px solid #E2E8F0}.economic-impact[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#0f172a;margin-bottom:1rem}.impact-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #E2E8F0}.impact-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.impact-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#64748b;font-size:.9rem}.impact-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0f172a;font-weight:600}.credibility-panels[_ngcontent-%COMP%]{margin-top:1.5rem}.credibility-panel[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;margin-bottom:1rem;border:1px solid #E2E8F0;overflow:hidden}.credibility-panel[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{padding:1rem;font-weight:600;color:#0f172a;cursor:pointer;display:flex;align-items:center;gap:.5rem}.credibility-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding:1rem;font-weight:600;color:#0f172a;margin:0;border-bottom:1px solid #E2E8F0}.panel-body[_ngcontent-%COMP%]{padding:1rem}.comparison-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;border-bottom:1px solid #E2E8F0}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f1f5f9;font-weight:600;font-size:.85rem;color:#475569}.comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem;color:#374151}.export-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #E2E8F0;flex-wrap:wrap}.btn-export[_ngcontent-%COMP%]{padding:.625rem 1rem;background:#fff;border:2px solid #E2E8F0;border-radius:8px;font-size:.85rem;font-weight:600;color:#475569;cursor:pointer;transition:all .2s ease}.btn-export[_ngcontent-%COMP%]:hover{border-color:#0d47a1;color:#0d47a1;background:#0d47a10d}.btn-export.secondary[_ngcontent-%COMP%]{background:#f8fafc}.empty-results[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#94a3b8;font-size:1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#64748b}.disclaimer[_ngcontent-%COMP%]{font-size:.8rem;color:#94a3b8;margin-top:.75rem;font-style:italic}.presentation-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0f172af2;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .3s ease}.presentation-card[_ngcontent-%COMP%]{background:#fff;border-radius:24px;padding:3rem;max-width:800px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px #00000040}.presentation-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:1rem}.presentation-step[_ngcontent-%COMP%]{color:#64748b;margin-bottom:.5rem}.presentation-progress[_ngcontent-%COMP%]{height:4px;background:#e2e8f0;border-radius:2px;margin-bottom:2rem;overflow:hidden}.presentation-progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#0d47a1,#f59e0b);transition:width .3s ease}.presentation-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin-bottom:1rem}.presentation-text[_ngcontent-%COMP%]{font-size:1.1rem;color:#475569;line-height:1.6;margin-bottom:2rem}.presentation-metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-bottom:2rem}.presentation-metrics[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]{text-align:center;padding:1.25rem}.presentation-metrics[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.presentation-metrics[_ngcontent-%COMP%]   .metric[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.25rem}.presentation-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}\"]\n      });\n    }\n  }\n  return SimulationControlsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}