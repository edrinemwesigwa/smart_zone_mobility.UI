{"ast":null,"code":"import { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/scenario.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AuditTrailComponent_div_16_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 25)(1, \"div\", 26);\n    i0.…µ…µtext(2);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"div\", 27)(4, \"div\", 28);\n    i0.…µ…µtext(5);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(6, \"div\", 29);\n    i0.…µ…µtext(7);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(8, \"div\", 30)(9, \"span\", 31);\n    i0.…µ…µtext(10);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(11, \"span\", 32);\n    i0.…µ…µtext(12);\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const entry_r3 = ctx.$implicit;\n    const ctx_r1 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance();\n    i0.…µ…µclassMap(ctx_r1.getActionClass(entry_r3.action));\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate1(\" \", ctx_r1.getActionIcon(entry_r3.action), \" \");\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate(entry_r3.description);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(entry_r3.details);\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate(ctx_r1.formatTime(entry_r3.timestamp));\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(ctx_r1.formatDate(entry_r3.timestamp));\n  }\n}\nfunction AuditTrailComponent_div_16_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 33)(1, \"span\", 34);\n    i0.…µ…µtext(2, \"\\uD83D\\uDCED\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"p\");\n    i0.…µ…µtext(4, \"No audit entries found\");\n    i0.…µ…µelementEnd()();\n  }\n}\nfunction AuditTrailComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"h3\");\n    i0.…µ…µtext(3, \"Activity Log\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"div\", 13)(5, \"select\", 14);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function AuditTrailComponent_div_16_Template_select_ngModelChange_5_listener($event) {\n      i0.…µ…µrestoreView(_r1);\n      const ctx_r1 = i0.…µ…µnextContext();\n      i0.…µ…µtwoWayBindingSet(ctx_r1.filterAction, $event) || (ctx_r1.filterAction = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µlistener(\"change\", function AuditTrailComponent_div_16_Template_select_change_5_listener() {\n      i0.…µ…µrestoreView(_r1);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.applyFilter());\n    });\n    i0.…µ…µelementStart(6, \"option\", 15);\n    i0.…µ…µtext(7, \"All Actions\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(8, \"option\", 16);\n    i0.…µ…µtext(9, \"Simulation Runs\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(10, \"option\", 17);\n    i0.…µ…µtext(11, \"Scenario Saved\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(12, \"option\", 18);\n    i0.…µ…µtext(13, \"Scenario Loaded\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(14, \"option\", 19);\n    i0.…µ…µtext(15, \"Scenario Deleted\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(16, \"option\", 20);\n    i0.…µ…µtext(17, \"Export Generated\");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(18, \"button\", 21);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_16_Template_button_click_18_listener() {\n      i0.…µ…µrestoreView(_r1);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.clearAuditLog());\n    });\n    i0.…µ…µtext(19, \" Clear Log \");\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(20, \"div\", 22);\n    i0.…µ…µtemplate(21, AuditTrailComponent_div_16_div_21_Template, 13, 7, \"div\", 23)(22, AuditTrailComponent_div_16_div_22_Template, 5, 0, \"div\", 24);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(5);\n    i0.…µ…µtwoWayProperty(\"ngModel\", ctx_r1.filterAction);\n    i0.…µ…µadvance(16);\n    i0.…µ…µproperty(\"ngForOf\", ctx_r1.filteredAuditLog);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", ctx_r1.filteredAuditLog.length === 0);\n  }\n}\nfunction AuditTrailComponent_div_17_div_7_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 54)(1, \"div\", 55)(2, \"span\", 56);\n    i0.…µ…µtext(3);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"span\", 57);\n    i0.…µ…µtext(5, \"Congestion\");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(6, \"div\", 55)(7, \"span\", 56);\n    i0.…µ…µtext(8);\n    i0.…µ…µpipe(9, \"number\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(10, \"span\", 57);\n    i0.…µ…µtext(11, \"Revenue\");\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const scenario_r6 = i0.…µ…µnextContext().$implicit;\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate1(\"\", scenario_r6.results.congestionReduction, \"%\");\n    i0.…µ…µadvance(5);\n    i0.…µ…µtextInterpolate1(\"AED \", i0.…µ…µpipeBind1(9, 2, scenario_r6.results.estimatedRevenue), \"\");\n  }\n}\nfunction AuditTrailComponent_div_17_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 38)(1, \"div\", 39)(2, \"span\", 40);\n    i0.…µ…µtext(3, \"\\uD83D\\uDCCA\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"div\", 41)(5, \"h4\");\n    i0.…µ…µtext(6);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(7, \"span\", 42);\n    i0.…µ…µtext(8);\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(9, \"p\", 43);\n    i0.…µ…µtext(10);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(11, \"div\", 44)(12, \"div\", 45)(13, \"span\", 46);\n    i0.…µ…µtext(14, \"Rate\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(15, \"span\", 47);\n    i0.…µ…µtext(16);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(17, \"div\", 45)(18, \"span\", 46);\n    i0.…µ…µtext(19, \"Free Hours\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(20, \"span\", 47);\n    i0.…µ…µtext(21);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(22, \"div\", 45)(23, \"span\", 46);\n    i0.…µ…µtext(24, \"Peak\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(25, \"span\", 47);\n    i0.…µ…µtext(26);\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µtemplate(27, AuditTrailComponent_div_17_div_7_div_27_Template, 12, 4, \"div\", 48);\n    i0.…µ…µelementStart(28, \"div\", 49)(29, \"button\", 50);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_17_div_7_Template_button_click_29_listener() {\n      const scenario_r6 = i0.…µ…µrestoreView(_r5).$implicit;\n      const ctx_r1 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r1.loadScenario(scenario_r6.id));\n    });\n    i0.…µ…µtext(30, \" \\uD83D\\uDCC2 Load \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(31, \"button\", 51);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_17_div_7_Template_button_click_31_listener() {\n      const scenario_r6 = i0.…µ…µrestoreView(_r5).$implicit;\n      const ctx_r1 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r1.duplicateScenario(scenario_r6));\n    });\n    i0.…µ…µtext(32, \" \\uD83D\\uDCCB Duplicate \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(33, \"button\", 52);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_17_div_7_Template_button_click_33_listener() {\n      const scenario_r6 = i0.…µ…µrestoreView(_r5).$implicit;\n      const ctx_r1 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r1.deleteScenario(scenario_r6.id));\n    });\n    i0.…µ…µtext(34, \" \\uD83D\\uDDD1\\uFE0F \");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(35, \"div\", 53);\n    i0.…µ…µtext(36);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const scenario_r6 = ctx.$implicit;\n    const ctx_r1 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance(6);\n    i0.…µ…µtextInterpolate(scenario_r6.name);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(scenario_r6.zoneName);\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(scenario_r6.description);\n    i0.…µ…µadvance(6);\n    i0.…µ…µtextInterpolate1(\"AED \", scenario_r6.config.hourlyRate, \"/hr\");\n    i0.…µ…µadvance(5);\n    i0.…µ…µtextInterpolate1(\"\", scenario_r6.config.freeHours, \" hrs\");\n    i0.…µ…µadvance(5);\n    i0.…µ…µtextInterpolate1(\"\", scenario_r6.config.peakMultiplier, \"x\");\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", scenario_r6.results);\n    i0.…µ…µadvance(9);\n    i0.…µ…µtextInterpolate1(\" Created: \", ctx_r1.formatDate(scenario_r6.createdAt), \" \");\n  }\n}\nfunction AuditTrailComponent_div_17_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 33)(1, \"span\", 34);\n    i0.…µ…µtext(2, \"\\uD83D\\uDCED\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"p\");\n    i0.…µ…µtext(4, \"No saved scenarios yet\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(5, \"button\", 35);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_17_div_8_Template_button_click_5_listener() {\n      i0.…µ…µrestoreView(_r7);\n      const ctx_r1 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r1.showSaveModal = true);\n    });\n    i0.…µ…µtext(6, \" Save Your First Scenario \");\n    i0.…µ…µelementEnd()();\n  }\n}\nfunction AuditTrailComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"h3\");\n    i0.…µ…µtext(3, \"Saved Scenarios\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"button\", 35);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_17_Template_button_click_4_listener() {\n      i0.…µ…µrestoreView(_r4);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.showSaveModal = true);\n    });\n    i0.…µ…µtext(5, \" + Save Current Scenario \");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(6, \"div\", 36);\n    i0.…µ…µtemplate(7, AuditTrailComponent_div_17_div_7_Template, 37, 8, \"div\", 37)(8, AuditTrailComponent_div_17_div_8_Template, 7, 0, \"div\", 24);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(7);\n    i0.…µ…µproperty(\"ngForOf\", ctx_r1.scenarios);\n    i0.…µ…µadvance();\n    i0.…µ…µproperty(\"ngIf\", ctx_r1.scenarios.length === 0);\n  }\n}\nfunction AuditTrailComponent_div_18_span_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"span\", 68);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance();\n    i0.…µ…µtextInterpolate(ctx_r1.selectedFile.name);\n  }\n}\nfunction AuditTrailComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 11)(1, \"div\", 12)(2, \"h3\");\n    i0.…µ…µtext(3, \"Export & Import\");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(4, \"div\", 58)(5, \"div\", 59)(6, \"span\", 60);\n    i0.…µ…µtext(7, \"\\uD83D\\uDCE4\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(8, \"h4\");\n    i0.…µ…µtext(9, \"Export Data\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(10, \"p\");\n    i0.…µ…µtext(11, \"Download all scenarios and audit log\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(12, \"div\", 61)(13, \"button\", 62);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_18_Template_button_click_13_listener() {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.exportScenarios());\n    });\n    i0.…µ…µtext(14, \" \\uD83D\\uDCBE Export Scenarios (JSON) \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(15, \"button\", 62);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_18_Template_button_click_15_listener() {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.exportAuditLog());\n    });\n    i0.…µ…µtext(16, \" \\uD83D\\uDCCB Export Audit Log \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(17, \"button\", 62);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_18_Template_button_click_17_listener() {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.exportAll());\n    });\n    i0.…µ…µtext(18, \" \\uD83D\\uDCE6 Export All \");\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(19, \"div\", 63)(20, \"span\", 60);\n    i0.…µ…µtext(21, \"\\uD83D\\uDCE5\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(22, \"h4\");\n    i0.…µ…µtext(23, \"Import Data\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(24, \"p\");\n    i0.…µ…µtext(25, \"Import scenarios from a JSON file\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(26, \"div\", 64)(27, \"input\", 65, 0);\n    i0.…µ…µlistener(\"change\", function AuditTrailComponent_div_18_Template_input_change_27_listener($event) {\n      i0.…µ…µrestoreView(_r8);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.onFileSelected($event));\n    });\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(29, \"button\", 66);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_18_Template_button_click_29_listener() {\n      i0.…µ…µrestoreView(_r8);\n      const fileInput_r9 = i0.…µ…µreference(28);\n      return i0.…µ…µresetView(fileInput_r9.click());\n    });\n    i0.…µ…µtext(30, \" \\uD83D\\uDCC2 Select File \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtemplate(31, AuditTrailComponent_div_18_span_31_Template, 2, 1, \"span\", 67);\n    i0.…µ…µelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(31);\n    i0.…µ…µproperty(\"ngIf\", ctx_r1.selectedFile);\n  }\n}\nfunction AuditTrailComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 69);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_26_Template_div_click_0_listener() {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.showSaveModal = false);\n    });\n    i0.…µ…µelementStart(1, \"div\", 70);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_26_Template_div_click_1_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      return i0.…µ…µresetView($event.stopPropagation());\n    });\n    i0.…µ…µelementStart(2, \"h3\");\n    i0.…µ…µtext(3, \"Save Current Scenario\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"div\", 71)(5, \"label\");\n    i0.…µ…µtext(6, \"Scenario Name\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(7, \"input\", 72);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function AuditTrailComponent_div_26_Template_input_ngModelChange_7_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r1 = i0.…µ…µnextContext();\n      i0.…µ…µtwoWayBindingSet(ctx_r1.newScenario.name, $event) || (ctx_r1.newScenario.name = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(8, \"div\", 71)(9, \"label\");\n    i0.…µ…µtext(10, \"Description\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(11, \"textarea\", 73);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function AuditTrailComponent_div_26_Template_textarea_ngModelChange_11_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r1 = i0.…µ…µnextContext();\n      i0.…µ…µtwoWayBindingSet(ctx_r1.newScenario.description, $event) || (ctx_r1.newScenario.description = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(12, \"div\", 71)(13, \"label\");\n    i0.…µ…µtext(14, \"Zone\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(15, \"select\", 74);\n    i0.…µ…µtwoWayListener(\"ngModelChange\", function AuditTrailComponent_div_26_Template_select_ngModelChange_15_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r1 = i0.…µ…µnextContext();\n      i0.…µ…µtwoWayBindingSet(ctx_r1.newScenario.zoneId, $event) || (ctx_r1.newScenario.zoneId = $event);\n      return i0.…µ…µresetView($event);\n    });\n    i0.…µ…µelementStart(16, \"option\", 15);\n    i0.…µ…µtext(17, \"Select a zone\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(18, \"option\", 75);\n    i0.…µ…µtext(19, \"Dubai Marina\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(20, \"option\", 76);\n    i0.…µ…µtext(21, \"Business Bay\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(22, \"option\", 77);\n    i0.…µ…µtext(23, \"Downtown Dubai\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(24, \"option\", 78);\n    i0.…µ…µtext(25, \"Mussafah\");\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(26, \"div\", 79)(27, \"button\", 21);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_26_Template_button_click_27_listener() {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.showSaveModal = false);\n    });\n    i0.…µ…µtext(28, \" Cancel \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(29, \"button\", 35);\n    i0.…µ…µlistener(\"click\", function AuditTrailComponent_div_26_Template_button_click_29_listener() {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r1 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r1.saveNewScenario());\n    });\n    i0.…µ…µtext(30, \" Save \");\n    i0.…µ…µelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(7);\n    i0.…µ…µtwoWayProperty(\"ngModel\", ctx_r1.newScenario.name);\n    i0.…µ…µadvance(4);\n    i0.…µ…µtwoWayProperty(\"ngModel\", ctx_r1.newScenario.description);\n    i0.…µ…µadvance(4);\n    i0.…µ…µtwoWayProperty(\"ngModel\", ctx_r1.newScenario.zoneId);\n  }\n}\nexport let AuditTrailComponent = /*#__PURE__*/(() => {\n  class AuditTrailComponent {\n    constructor(scenarioService) {\n      this.scenarioService = scenarioService;\n      this.activeTab = \"audit\";\n      this.filterAction = \"\";\n      this.scenarios = [];\n      this.auditLog = [];\n      this.filteredAuditLog = [];\n      this.showSaveModal = false;\n      this.selectedFile = null;\n      this.newScenario = {\n        name: \"\",\n        description: \"\",\n        zoneId: \"\",\n        zoneName: \"\"\n      };\n    }\n    ngOnInit() {\n      this.scenarioService.scenarios$.subscribe(scenarios => {\n        this.scenarios = scenarios;\n      });\n      this.scenarioService.auditLog$.subscribe(log => {\n        this.auditLog = log;\n        this.applyFilter();\n      });\n    }\n    getActionIcon(action) {\n      const icons = {\n        simulation_run: \"üß™\",\n        scenario_saved: \"üíæ\",\n        scenario_loaded: \"üìÇ\",\n        scenario_deleted: \"üóëÔ∏è\",\n        export_generated: \"üì§\",\n        zone_created: \"üó∫Ô∏è\",\n        zone_updated: \"‚úèÔ∏è\",\n        settings_changed: \"‚öôÔ∏è\"\n      };\n      return icons[action] || \"üìã\";\n    }\n    getActionClass(action) {\n      const classes = {\n        simulation_run: \"simulation\",\n        scenario_saved: \"save\",\n        scenario_loaded: \"load\",\n        scenario_deleted: \"delete\",\n        export_generated: \"export\"\n      };\n      return classes[action] || \"\";\n    }\n    formatTime(date) {\n      return new Date(date).toLocaleTimeString(\"en-US\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n      });\n    }\n    formatDate(date) {\n      return new Date(date).toLocaleDateString(\"en-US\", {\n        month: \"short\",\n        day: \"numeric\",\n        year: \"numeric\"\n      });\n    }\n    applyFilter() {\n      if (this.filterAction) {\n        this.filteredAuditLog = this.auditLog.filter(entry => entry.action === this.filterAction);\n      } else {\n        this.filteredAuditLog = [...this.auditLog];\n      }\n    }\n    clearAuditLog() {\n      if (confirm(\"Are you sure you want to clear the audit log?\")) {\n        this.scenarioService.clearAuditLog();\n      }\n    }\n    loadScenario(id) {\n      const scenario = this.scenarioService.loadScenario(id);\n      if (scenario) {\n        alert(`Scenario \"${scenario.name}\" loaded!`);\n      }\n    }\n    duplicateScenario(scenario) {\n      this.scenarioService.saveScenario({\n        name: `${scenario.name} (Copy)`,\n        description: scenario.description,\n        zoneId: scenario.zoneId,\n        zoneName: scenario.zoneName,\n        config: {\n          ...scenario.config\n        },\n        results: scenario.results ? {\n          ...scenario.results\n        } : undefined\n      });\n    }\n    deleteScenario(id) {\n      if (confirm(\"Are you sure you want to delete this scenario?\")) {\n        this.scenarioService.deleteScenario(id);\n      }\n    }\n    saveNewScenario() {\n      if (!this.newScenario.name || !this.newScenario.zoneId) {\n        alert(\"Please fill in required fields\");\n        return;\n      }\n      const zoneNames = {\n        \"dubai-marina\": \"Dubai Marina\",\n        \"business-bay\": \"Business Bay\",\n        downtown: \"Downtown Dubai\",\n        mussafah: \"Mussafah\"\n      };\n      this.scenarioService.saveScenario({\n        name: this.newScenario.name,\n        description: this.newScenario.description,\n        zoneId: this.newScenario.zoneId,\n        zoneName: zoneNames[this.newScenario.zoneId] || \"Unknown\",\n        config: {\n          hourlyRate: 25,\n          freeHours: 1,\n          peakMultiplier: 1.5,\n          exemptPublicTransport: true,\n          exemptCommercial: true,\n          exemptEmergency: true\n        }\n      });\n      this.showSaveModal = false;\n      this.newScenario = {\n        name: \"\",\n        description: \"\",\n        zoneId: \"\",\n        zoneName: \"\"\n      };\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      if (input.files && input.files[0]) {\n        this.selectedFile = input.files[0];\n      }\n    }\n    exportScenarios() {\n      const data = this.scenarioService.exportScenarios();\n      this.downloadFile(data, \"scenarios.json\", \"application/json\");\n    }\n    exportAuditLog() {\n      const data = JSON.stringify(this.auditLog, null, 2);\n      this.downloadFile(data, \"audit-log.json\", \"application/json\");\n    }\n    exportAll() {\n      const data = JSON.stringify({\n        scenarios: this.scenarios,\n        auditLog: this.auditLog,\n        exportedAt: new Date().toISOString()\n      }, null, 2);\n      this.downloadFile(data, \"smartmobility-export.json\", \"application/json\");\n    }\n    downloadFile(data, filename, type) {\n      const blob = new Blob([data], {\n        type\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = filename;\n      a.click();\n      URL.revokeObjectURL(url);\n    }\n    clearAllData() {\n      if (confirm(\"‚ö†Ô∏è WARNING: This will delete ALL saved scenarios and clear the audit log. This cannot be undone!\\n\\nAre you sure you want to continue?\")) {\n        localStorage.clear();\n        window.location.reload();\n      }\n    }\n    static {\n      this.…µfac = function AuditTrailComponent_Factory(t) {\n        return new (t || AuditTrailComponent)(i0.…µ…µdirectiveInject(i1.ScenarioService));\n      };\n    }\n    static {\n      this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n        type: AuditTrailComponent,\n        selectors: [[\"app-audit-trail\"]],\n        standalone: true,\n        features: [i0.…µ…µStandaloneFeature],\n        decls: 27,\n        vars: 10,\n        consts: [[\"fileInput\", \"\"], [1, \"audit-container\"], [1, \"audit-header\"], [1, \"header-icon\"], [1, \"audit-content\"], [1, \"tabs\"], [1, \"tab-btn\", 3, \"click\"], [\"class\", \"tab-content\", 4, \"ngIf\"], [1, \"danger-zone\"], [1, \"btn-danger\", 3, \"click\"], [\"class\", \"modal-overlay\", 3, \"click\", 4, \"ngIf\"], [1, \"tab-content\"], [1, \"tab-header\"], [1, \"tab-actions\"], [3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"simulation_run\"], [\"value\", \"scenario_saved\"], [\"value\", \"scenario_loaded\"], [\"value\", \"scenario_deleted\"], [\"value\", \"export_generated\"], [1, \"btn-secondary\", 3, \"click\"], [1, \"audit-list\"], [\"class\", \"audit-item\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [1, \"audit-item\"], [1, \"audit-icon\"], [1, \"audit-info\"], [1, \"audit-description\"], [1, \"audit-details\"], [1, \"audit-time\"], [1, \"time\"], [1, \"date\"], [1, \"empty-state\"], [1, \"empty-icon\"], [1, \"btn-primary\", 3, \"click\"], [1, \"scenarios-grid\"], [\"class\", \"scenario-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"scenario-card\"], [1, \"scenario-header\"], [1, \"scenario-icon\"], [1, \"scenario-title\"], [1, \"scenario-zone\"], [1, \"scenario-description\"], [1, \"scenario-config\"], [1, \"config-item\"], [1, \"config-label\"], [1, \"config-value\"], [\"class\", \"scenario-results\", 4, \"ngIf\"], [1, \"scenario-actions\"], [1, \"action-btn\", \"load\", 3, \"click\"], [1, \"action-btn\", \"duplicate\", 3, \"click\"], [1, \"action-btn\", \"delete\", 3, \"click\"], [1, \"scenario-meta\"], [1, \"scenario-results\"], [1, \"result-item\"], [1, \"result-value\"], [1, \"result-label\"], [1, \"export-section\"], [1, \"export-card\"], [1, \"export-icon\"], [1, \"export-buttons\"], [1, \"export-btn\", 3, \"click\"], [1, \"import-card\"], [1, \"import-area\"], [\"type\", \"file\", \"accept\", \".json\", 3, \"change\"], [1, \"import-btn\", 3, \"click\"], [\"class\", \"file-name\", 4, \"ngIf\"], [1, \"file-name\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"modal\", 3, \"click\"], [1, \"form-group\"], [\"type\", \"text\", \"placeholder\", \"My Custom Scenario\", 3, \"ngModelChange\", \"ngModel\"], [\"placeholder\", \"Describe this scenario...\", 3, \"ngModelChange\", \"ngModel\"], [3, \"ngModelChange\", \"ngModel\"], [\"value\", \"dubai-marina\"], [\"value\", \"business-bay\"], [\"value\", \"downtown\"], [\"value\", \"mussafah\"], [1, \"modal-actions\"]],\n        template: function AuditTrailComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.…µ…µelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"span\", 3);\n            i0.…µ…µtext(3, \"\\uD83D\\uDCCB\");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(4, \"h1\");\n            i0.…µ…µtext(5, \"Audit Trail & Saved Scenarios\");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(6, \"p\");\n            i0.…µ…µtext(7, \"View history of all operations and manage saved scenarios\");\n            i0.…µ…µelementEnd()();\n            i0.…µ…µelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"button\", 6);\n            i0.…µ…µlistener(\"click\", function AuditTrailComponent_Template_button_click_10_listener() {\n              return ctx.activeTab = \"audit\";\n            });\n            i0.…µ…µtext(11, \" \\uD83D\\uDCCB Audit Log \");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(12, \"button\", 6);\n            i0.…µ…µlistener(\"click\", function AuditTrailComponent_Template_button_click_12_listener() {\n              return ctx.activeTab = \"scenarios\";\n            });\n            i0.…µ…µtext(13, \" \\uD83D\\uDCBE Saved Scenarios \");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(14, \"button\", 6);\n            i0.…µ…µlistener(\"click\", function AuditTrailComponent_Template_button_click_14_listener() {\n              return ctx.activeTab = \"export\";\n            });\n            i0.…µ…µtext(15, \" \\uD83D\\uDCE4 Export/Import \");\n            i0.…µ…µelementEnd()();\n            i0.…µ…µtemplate(16, AuditTrailComponent_div_16_Template, 23, 3, \"div\", 7)(17, AuditTrailComponent_div_17_Template, 9, 2, \"div\", 7)(18, AuditTrailComponent_div_18_Template, 32, 1, \"div\", 7);\n            i0.…µ…µelementStart(19, \"div\", 8)(20, \"h4\");\n            i0.…µ…µtext(21, \"\\u26A0\\uFE0F Danger Zone\");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(22, \"p\");\n            i0.…µ…µtext(23, \" This will permanently delete all saved data including scenarios and audit logs. \");\n            i0.…µ…µelementEnd();\n            i0.…µ…µelementStart(24, \"button\", 9);\n            i0.…µ…µlistener(\"click\", function AuditTrailComponent_Template_button_click_24_listener() {\n              return ctx.clearAllData();\n            });\n            i0.…µ…µtext(25, \" \\uD83D\\uDDD1\\uFE0F Clear All Data \");\n            i0.…µ…µelementEnd()()();\n            i0.…µ…µtemplate(26, AuditTrailComponent_div_26_Template, 31, 3, \"div\", 10);\n            i0.…µ…µelementEnd();\n          }\n          if (rf & 2) {\n            i0.…µ…µadvance(10);\n            i0.…µ…µclassProp(\"active\", ctx.activeTab === \"audit\");\n            i0.…µ…µadvance(2);\n            i0.…µ…µclassProp(\"active\", ctx.activeTab === \"scenarios\");\n            i0.…µ…µadvance(2);\n            i0.…µ…µclassProp(\"active\", ctx.activeTab === \"export\");\n            i0.…µ…µadvance(2);\n            i0.…µ…µproperty(\"ngIf\", ctx.activeTab === \"audit\");\n            i0.…µ…µadvance();\n            i0.…µ…µproperty(\"ngIf\", ctx.activeTab === \"scenarios\");\n            i0.…µ…µadvance();\n            i0.…µ…µproperty(\"ngIf\", ctx.activeTab === \"export\");\n            i0.…µ…µadvance(8);\n            i0.…µ…µproperty(\"ngIf\", ctx.showSaveModal);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, i2.DecimalPipe, FormsModule, i3.NgSelectOption, i3.…µNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n        styles: [\".audit-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.audit-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.header-icon[_ngcontent-%COMP%]{font-size:48px;display:block;margin-bottom:16px}.audit-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 8px;color:#1e3a5f}.audit-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#64748b}.audit-content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 4px 16px #00000014;overflow:hidden}.tabs[_ngcontent-%COMP%]{display:flex;background:#f8fafc;border-bottom:1px solid #e2e8f0}.tab-btn[_ngcontent-%COMP%]{flex:1;padding:16px;background:none;border:none;cursor:pointer;font-size:14px;font-weight:600;color:#64748b;transition:all .2s}.tab-btn.active[_ngcontent-%COMP%]{background:#fff;color:#3b82f6;border-bottom:2px solid #3b82f6}.tab-content[_ngcontent-%COMP%]{padding:24px}.tab-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.tab-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1e3a5f}.tab-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.tab-actions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px}.btn-primary[_ngcontent-%COMP%]{padding:10px 20px;background:#3b82f6;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;background:#f1f5f9;color:#475569;border:none;border-radius:8px;font-weight:600;cursor:pointer}.audit-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.audit-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#f8fafc;border-radius:12px;gap:16px}.audit-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:20px;background:#e2e8f0}.audit-icon.simulation[_ngcontent-%COMP%]{background:#dbeafe}.audit-icon.save[_ngcontent-%COMP%]{background:#d1fae5}.audit-icon.load[_ngcontent-%COMP%]{background:#fef3c7}.audit-icon.delete[_ngcontent-%COMP%]{background:#fee2e2}.audit-icon.export[_ngcontent-%COMP%]{background:#e0e7ff}.audit-info[_ngcontent-%COMP%]{flex:1}.audit-description[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;margin-bottom:4px}.audit-details[_ngcontent-%COMP%]{font-size:13px;color:#64748b}.audit-time[_ngcontent-%COMP%]{text-align:right}.audit-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:block;font-weight:600;color:#1e293b}.audit-time[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:12px;color:#64748b}.scenarios-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px}.scenario-card[_ngcontent-%COMP%]{background:#f8fafc;border-radius:16px;padding:20px}.scenario-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:12px}.scenario-icon[_ngcontent-%COMP%]{font-size:32px}.scenario-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1e3a5f}.scenario-zone[_ngcontent-%COMP%]{font-size:13px;color:#64748b}.scenario-description[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px;color:#64748b}.scenario-config[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid #e2e8f0}.config-item[_ngcontent-%COMP%]{flex:1;text-align:center}.config-label[_ngcontent-%COMP%]{display:block;font-size:11px;color:#64748b;margin-bottom:4px}.config-value[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:13px}.scenario-results[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:16px}.result-item[_ngcontent-%COMP%]{flex:1;background:#fff;padding:12px;border-radius:8px;text-align:center}.result-value[_ngcontent-%COMP%]{display:block;font-weight:700;color:#10b981}.result-label[_ngcontent-%COMP%]{font-size:11px;color:#64748b}.scenario-actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px}.action-btn[_ngcontent-%COMP%]{flex:1;padding:8px;border:none;border-radius:6px;cursor:pointer;font-size:12px;font-weight:600}.action-btn.load[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.action-btn.duplicate[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.action-btn.delete[_ngcontent-%COMP%]{background:#fee2e2;color:#dc2626}.scenario-meta[_ngcontent-%COMP%]{font-size:11px;color:#94a3b8}.export-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.export-card[_ngcontent-%COMP%], .import-card[_ngcontent-%COMP%]{background:#f8fafc;border-radius:16px;padding:24px;text-align:center}.export-icon[_ngcontent-%COMP%]{font-size:48px;display:block;margin-bottom:16px}.export-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .import-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#1e3a5f}.export-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .import-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;color:#64748b}.export-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.export-btn[_ngcontent-%COMP%], .import-btn[_ngcontent-%COMP%]{padding:12px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;cursor:pointer;font-weight:600;color:#1e293b}.export-btn[_ngcontent-%COMP%]:hover, .import-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9}.import-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.import-area[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.file-name[_ngcontent-%COMP%]{font-size:13px;color:#64748b}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#64748b}.empty-icon[_ngcontent-%COMP%]{font-size:48px;display:block;margin-bottom:16px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;width:400px;max-width:90%}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#1e3a5f}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#64748b;margin-bottom:6px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:20px}.danger-zone[_ngcontent-%COMP%]{margin-top:30px;padding:20px;background:#fef2f2;border:2px solid #fecaca;border-radius:12px;text-align:center}.danger-zone[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;color:#dc2626}.danger-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:#64748b;font-size:14px}.btn-danger[_ngcontent-%COMP%]{padding:12px 24px;background:#dc2626;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.btn-danger[_ngcontent-%COMP%]:hover{background:#b91c1c}\"]\n      });\n    }\n  }\n  return AuditTrailComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}