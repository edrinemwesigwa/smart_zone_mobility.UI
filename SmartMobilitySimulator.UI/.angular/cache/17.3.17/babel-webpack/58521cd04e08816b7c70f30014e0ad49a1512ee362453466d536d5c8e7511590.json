{"ast":null,"code":"import { getApiBase } from \"./api-base\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class SimulationService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = `${getApiBase()}/api/simulations`;\n  }\n  runSimulation(request) {\n    return this.http.post(`${this.apiUrl}/run`, request);\n  }\n  getSimulationResult(id) {\n    return this.http.get(`${this.apiUrl}/${id}`);\n  }\n  getAllSimulations() {\n    return this.http.get(this.apiUrl);\n  }\n  // Get current user's saved simulations\n  getMySimulations() {\n    return this.http.get(`${this.apiUrl}/my`);\n  }\n  // Save simulation for current user\n  saveSimulation(request) {\n    const dto = {\n      ...request,\n      id: request.id ? request.id : undefined\n    };\n    return this.http.post(`${this.apiUrl}/save`, dto);\n  }\n  // Share simulation publicly (admin only)\n  shareSimulation(id, isPublic) {\n    return this.http.post(`${this.apiUrl}/${id}/share`, {\n      isPublic\n    });\n  }\n  compareSimulations(ids) {\n    return this.http.post(`${this.apiUrl}/compare`, {\n      simulationIds: ids\n    });\n  }\n  deleteSimulation(id) {\n    return this.http.delete(`${this.apiUrl}/${id}`);\n  }\n  exportSimulationReport(id, format) {\n    return this.http.get(`${this.apiUrl}/${id}/export`, {\n      params: {\n        format\n      },\n      responseType: \"blob\"\n    });\n  }\n  getEconomicImpact(id) {\n    return this.http.get(`${this.apiUrl}/${id}/economic-impact`);\n  }\n  getInvestorReport(id) {\n    return this.http.get(`${this.apiUrl}/${id}/investor-report`, {\n      responseType: \"blob\"\n    });\n  }\n  // Generate authority/government report\n  getAuthorityReport(id, authorityName = \"RTA Dubai\", jurisdiction = \"Dubai, UAE\") {\n    return this.http.get(`${this.apiUrl}/${id}/authority-report`, {\n      params: {\n        authorityName,\n        jurisdiction\n      },\n      responseType: \"blob\"\n    });\n  }\n  static {\n    this.ɵfac = function SimulationService_Factory(t) {\n      return new (t || SimulationService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: SimulationService,\n      factory: SimulationService.ɵfac,\n      providedIn: \"root\"\n    });\n  }\n}","map":{"version":3,"names":["getApiBase","SimulationService","constructor","http","apiUrl","runSimulation","request","post","getSimulationResult","id","get","getAllSimulations","getMySimulations","saveSimulation","dto","undefined","shareSimulation","isPublic","compareSimulations","ids","simulationIds","deleteSimulation","delete","exportSimulationReport","format","params","responseType","getEconomicImpact","getInvestorReport","getAuthorityReport","authorityName","jurisdiction","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\edrin\\OneDrive\\Desktop\\Mobility\\SmartZoneSimulator.UI\\src\\app\\services\\simulation.service.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs\";\r\nimport {\r\n  SimulationRequest,\r\n  SimulationResult,\r\n} from \"../models/simulation.model\";\r\nimport { getApiBase } from \"./api-base\";\r\n\r\nexport interface SaveSimulationRequest {\r\n  id?: string;\r\n  name?: string;\r\n  description?: string;\r\n  zoneRules?: string;\r\n  results?: string;\r\n  totalVehicles: number;\r\n  vehiclesDiverted: number;\r\n  congestionReduction: number;\r\n  estimatedRevenue: number;\r\n  equityImpact: number;\r\n  environmentalImpact: number;\r\n  isPublic: boolean;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class SimulationService {\r\n  private apiUrl = `${getApiBase()}/api/simulations`;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  runSimulation(request: SimulationRequest): Observable<SimulationResult> {\r\n    return this.http.post<SimulationResult>(`${this.apiUrl}/run`, request);\r\n  }\r\n\r\n  getSimulationResult(id: string): Observable<SimulationResult> {\r\n    return this.http.get<SimulationResult>(`${this.apiUrl}/${id}`);\r\n  }\r\n\r\n  getAllSimulations(): Observable<SimulationResult[]> {\r\n    return this.http.get<SimulationResult[]>(this.apiUrl);\r\n  }\r\n\r\n  // Get current user's saved simulations\r\n  getMySimulations(): Observable<SimulationResult[]> {\r\n    return this.http.get<SimulationResult[]>(`${this.apiUrl}/my`);\r\n  }\r\n\r\n  // Save simulation for current user\r\n  saveSimulation(request: SaveSimulationRequest): Observable<SimulationResult> {\r\n    const dto = {\r\n      ...request,\r\n      id: request.id ? request.id : undefined,\r\n    };\r\n    return this.http.post<SimulationResult>(`${this.apiUrl}/save`, dto);\r\n  }\r\n\r\n  // Share simulation publicly (admin only)\r\n  shareSimulation(id: string, isPublic: boolean): Observable<SimulationResult> {\r\n    return this.http.post<SimulationResult>(`${this.apiUrl}/${id}/share`, {\r\n      isPublic,\r\n    });\r\n  }\r\n\r\n  compareSimulations(ids: string[]): Observable<any> {\r\n    return this.http.post<any>(`${this.apiUrl}/compare`, {\r\n      simulationIds: ids,\r\n    });\r\n  }\r\n\r\n  deleteSimulation(id: string): Observable<void> {\r\n    return this.http.delete<void>(`${this.apiUrl}/${id}`);\r\n  }\r\n\r\n  exportSimulationReport(\r\n    id: string,\r\n    format: \"pdf\" | \"csv\" | \"json\",\r\n  ): Observable<any> {\r\n    return this.http.get(`${this.apiUrl}/${id}/export`, {\r\n      params: { format },\r\n      responseType: \"blob\",\r\n    });\r\n  }\r\n\r\n  getEconomicImpact(id: string): Observable<any> {\r\n    return this.http.get<any>(`${this.apiUrl}/${id}/economic-impact`);\r\n  }\r\n\r\n  getInvestorReport(id: string): Observable<Blob> {\r\n    return this.http.get(`${this.apiUrl}/${id}/investor-report`, {\r\n      responseType: \"blob\",\r\n    });\r\n  }\r\n\r\n  // Generate authority/government report\r\n  getAuthorityReport(\r\n    id: string,\r\n    authorityName: string = \"RTA Dubai\",\r\n    jurisdiction: string = \"Dubai, UAE\",\r\n  ): Observable<Blob> {\r\n    return this.http.get(`${this.apiUrl}/${id}/authority-report`, {\r\n      params: { authorityName, jurisdiction },\r\n      responseType: \"blob\",\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}