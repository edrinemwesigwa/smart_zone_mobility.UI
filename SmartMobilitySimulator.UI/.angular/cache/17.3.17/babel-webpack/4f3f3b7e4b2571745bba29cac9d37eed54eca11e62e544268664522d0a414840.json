{"ast":null,"code":"export function unfilterNone(currentLine, newLine, bytesPerLine) {\n  for (let i = 0; i < bytesPerLine; i++) {\n    newLine[i] = currentLine[i];\n  }\n}\nexport function unfilterSub(currentLine, newLine, bytesPerLine, bytesPerPixel) {\n  let i = 0;\n  for (; i < bytesPerPixel; i++) {\n    // just copy first bytes\n    newLine[i] = currentLine[i];\n  }\n  for (; i < bytesPerLine; i++) {\n    newLine[i] = currentLine[i] + newLine[i - bytesPerPixel] & 0xff;\n  }\n}\nexport function unfilterUp(currentLine, newLine, prevLine, bytesPerLine) {\n  let i = 0;\n  if (prevLine.length === 0) {\n    // just copy bytes for first line\n    for (; i < bytesPerLine; i++) {\n      newLine[i] = currentLine[i];\n    }\n  } else {\n    for (; i < bytesPerLine; i++) {\n      newLine[i] = currentLine[i] + prevLine[i] & 0xff;\n    }\n  }\n}\nexport function unfilterAverage(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel) {\n  let i = 0;\n  if (prevLine.length === 0) {\n    for (; i < bytesPerPixel; i++) {\n      newLine[i] = currentLine[i];\n    }\n    for (; i < bytesPerLine; i++) {\n      newLine[i] = currentLine[i] + (newLine[i - bytesPerPixel] >> 1) & 0xff;\n    }\n  } else {\n    for (; i < bytesPerPixel; i++) {\n      newLine[i] = currentLine[i] + (prevLine[i] >> 1) & 0xff;\n    }\n    for (; i < bytesPerLine; i++) {\n      newLine[i] = currentLine[i] + (newLine[i - bytesPerPixel] + prevLine[i] >> 1) & 0xff;\n    }\n  }\n}\nexport function unfilterPaeth(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel) {\n  let i = 0;\n  if (prevLine.length === 0) {\n    for (; i < bytesPerPixel; i++) {\n      newLine[i] = currentLine[i];\n    }\n    for (; i < bytesPerLine; i++) {\n      newLine[i] = currentLine[i] + newLine[i - bytesPerPixel] & 0xff;\n    }\n  } else {\n    for (; i < bytesPerPixel; i++) {\n      newLine[i] = currentLine[i] + prevLine[i] & 0xff;\n    }\n    for (; i < bytesPerLine; i++) {\n      newLine[i] = currentLine[i] + paethPredictor(newLine[i - bytesPerPixel], prevLine[i], prevLine[i - bytesPerPixel]) & 0xff;\n    }\n  }\n}\nfunction paethPredictor(a, b, c) {\n  const p = a + b - c;\n  const pa = Math.abs(p - a);\n  const pb = Math.abs(p - b);\n  const pc = Math.abs(p - c);\n  if (pa <= pb && pa <= pc) return a;else if (pb <= pc) return b;else return c;\n}","map":{"version":3,"names":["unfilterNone","currentLine","newLine","bytesPerLine","i","unfilterSub","bytesPerPixel","unfilterUp","prevLine","length","unfilterAverage","unfilterPaeth","paethPredictor","a","b","c","p","pa","Math","abs","pb","pc"],"sources":["C:/Users/edrin/OneDrive/Desktop/Mobility/SmartMobilitySimulator.UI/node_modules/fast-png/lib-esm/helpers/unfilter.js"],"sourcesContent":["export function unfilterNone(currentLine, newLine, bytesPerLine) {\n    for (let i = 0; i < bytesPerLine; i++) {\n        newLine[i] = currentLine[i];\n    }\n}\nexport function unfilterSub(currentLine, newLine, bytesPerLine, bytesPerPixel) {\n    let i = 0;\n    for (; i < bytesPerPixel; i++) {\n        // just copy first bytes\n        newLine[i] = currentLine[i];\n    }\n    for (; i < bytesPerLine; i++) {\n        newLine[i] = (currentLine[i] + newLine[i - bytesPerPixel]) & 0xff;\n    }\n}\nexport function unfilterUp(currentLine, newLine, prevLine, bytesPerLine) {\n    let i = 0;\n    if (prevLine.length === 0) {\n        // just copy bytes for first line\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = currentLine[i];\n        }\n    }\n    else {\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = (currentLine[i] + prevLine[i]) & 0xff;\n        }\n    }\n}\nexport function unfilterAverage(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel) {\n    let i = 0;\n    if (prevLine.length === 0) {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = currentLine[i];\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = (currentLine[i] + (newLine[i - bytesPerPixel] >> 1)) & 0xff;\n        }\n    }\n    else {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = (currentLine[i] + (prevLine[i] >> 1)) & 0xff;\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] =\n                (currentLine[i] + ((newLine[i - bytesPerPixel] + prevLine[i]) >> 1)) &\n                    0xff;\n        }\n    }\n}\nexport function unfilterPaeth(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel) {\n    let i = 0;\n    if (prevLine.length === 0) {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = currentLine[i];\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = (currentLine[i] + newLine[i - bytesPerPixel]) & 0xff;\n        }\n    }\n    else {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = (currentLine[i] + prevLine[i]) & 0xff;\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] =\n                (currentLine[i] +\n                    paethPredictor(newLine[i - bytesPerPixel], prevLine[i], prevLine[i - bytesPerPixel])) &\n                    0xff;\n        }\n    }\n}\nfunction paethPredictor(a, b, c) {\n    const p = a + b - c;\n    const pa = Math.abs(p - a);\n    const pb = Math.abs(p - b);\n    const pc = Math.abs(p - c);\n    if (pa <= pb && pa <= pc)\n        return a;\n    else if (pb <= pc)\n        return b;\n    else\n        return c;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}