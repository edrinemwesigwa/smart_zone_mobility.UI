{"ast":null,"code":"import _asyncToGenerator from \"c:/Users/edrin/OneDrive/Desktop/Mobility/SmartZoneSimulator.UI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as JSZip from \"jszip\";\nimport { getApiBase } from \"../../services/api-base\";\nimport { firstValueFrom } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/demo-mode.service\";\nimport * as i2 from \"../../services/simulation.service\";\nimport * as i3 from \"../../services/business-case.service\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction DemoModeComponent_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const agency_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", agency_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", agency_r1, \" \");\n  }\n}\nfunction DemoModeComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\");\n    i0.ɵɵtext(2, \"Custom Agency Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 21);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function DemoModeComponent_div_24_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.customAgency, $event) || (ctx_r2.customAgency = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.customAgency);\n  }\n}\nfunction DemoModeComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelement(1, \"img\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r2.logoDataUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DemoModeComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \"Launching demo...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DemoModeComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.error);\n  }\n}\nfunction DemoModeComponent_div_41_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"strong\");\n    i0.ɵɵtext(2, \"Speaker Notes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.demoSteps[ctx_r2.activeStepIndex].notes);\n  }\n}\nfunction DemoModeComponent_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, DemoModeComponent_div_41_div_5_Template, 5, 1, \"div\", 27);\n    i0.ɵɵelementStart(6, \"div\", 28)(7, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function DemoModeComponent_div_41_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.prevStep());\n    });\n    i0.ɵɵtext(8, \"Back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function DemoModeComponent_div_41_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.nextStep());\n    });\n    i0.ɵɵtext(10, \"Next\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function DemoModeComponent_div_41_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleNotes());\n    });\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.demoSteps[ctx_r2.activeStepIndex].title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.demoSteps[ctx_r2.activeStepIndex].text);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showNotes);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.showNotes ? \"Hide\" : \"Show\", \" Notes \");\n  }\n}\nfunction DemoModeComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"p\");\n    i0.ɵɵtext(2, \"Select a demo scenario to load the script.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction DemoModeComponent_div_43_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.logoDataUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction DemoModeComponent_div_43_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"div\")(2, \"span\");\n    i0.ɵɵtext(3, \"Congestion Reduction\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"strong\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\")(8, \"span\");\n    i0.ɵɵtext(9, \"Estimated Revenue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\")(14, \"span\");\n    i0.ɵɵtext(15, \"Vehicles Diverted\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"strong\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"number\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(6, 3, ctx_r2.simulation.congestionReduction, \"1.1-1\"), \"%\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"AED \", i0.ɵɵpipeBind1(12, 6, ctx_r2.simulation.estimatedRevenue), \"\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 8, ctx_r2.simulation.vehiclesDiverted));\n  }\n}\nfunction DemoModeComponent_div_43_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41)(1, \"h4\");\n    i0.ɵɵtext(2, \"Speaker Notes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.demoSteps[ctx_r2.activeStepIndex].notes);\n  }\n}\nfunction DemoModeComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"div\", 32)(2, \"div\", 33)(3, \"div\")(4, \"h3\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, DemoModeComponent_div_43_img_8_Template, 1, 1, \"img\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 35)(10, \"h1\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, DemoModeComponent_div_43_div_14_Template, 19, 10, \"div\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 37)(16, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function DemoModeComponent_div_43_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.prevStep());\n    });\n    i0.ɵɵtext(17, \"Back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function DemoModeComponent_div_43_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.nextStep());\n    });\n    i0.ɵɵtext(19, \"Next\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function DemoModeComponent_div_43_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.stopPresentation());\n    });\n    i0.ɵɵtext(21, \"Exit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(22, DemoModeComponent_div_43_div_22_Template, 5, 1, \"div\", 39);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2.agencyName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.scenario == null ? null : ctx_r2.scenario.name);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.logoDataUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.demoSteps[ctx_r2.activeStepIndex].title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.demoSteps[ctx_r2.activeStepIndex].text);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.demoSteps[ctx_r2.activeStepIndex].title === \"Results\" && ctx_r2.simulation);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showNotes);\n  }\n}\nexport let DemoModeComponent = /*#__PURE__*/(() => {\n  class DemoModeComponent {\n    constructor(demoService, simulationService, businessCaseService, http) {\n      this.demoService = demoService;\n      this.simulationService = simulationService;\n      this.businessCaseService = businessCaseService;\n      this.http = http;\n      this.agencyOptions = [\"Abu Dhabi ITC\", \"Dubai RTA\", \"Smart Dubai\", \"Ministry of Energy & Infrastructure\", \"Custom\"];\n      this.selectedAgency = \"Abu Dhabi ITC\";\n      this.customAgency = \"\";\n      this.logoDataUrl = null;\n      this.isLoading = false;\n      this.error = null;\n      this.scenario = null;\n      this.simulation = null;\n      this.demoSteps = [];\n      this.activeStepIndex = 0;\n      this.showNotes = true;\n      this.isPresenting = false;\n      this.stepTimer = null;\n    }\n    ngOnDestroy() {\n      this.clearTimer();\n    }\n    get agencyName() {\n      return this.selectedAgency === \"Custom\" && this.customAgency ? this.customAgency : this.selectedAgency;\n    }\n    launchDemo(key) {\n      this.isLoading = true;\n      this.error = null;\n      this.simulation = null;\n      this.demoService.getScenario(key).subscribe({\n        next: scenario => {\n          this.scenario = scenario;\n          this.demoSteps = this.buildSteps(scenario);\n          this.activeStepIndex = 0;\n          this.startStepTimer();\n          this.runSimulation(scenario);\n        },\n        error: () => {\n          this.error = \"Failed to load demo scenario\";\n          this.isLoading = false;\n        }\n      });\n    }\n    runSimulation(scenario) {\n      const request = {\n        zoneId: scenario.zoneId,\n        date: new Date(),\n        zoneRules: {\n          freeHours: scenario.rules.freeHours,\n          customChargePerHour: scenario.rules.chargePerHour,\n          exemptions: scenario.rules.exemptions,\n          diversionThreshold: 60,\n          peakMultiplier: 1.4\n        }\n      };\n      this.simulationService.runSimulation(request).subscribe({\n        next: result => {\n          this.simulation = result;\n          this.startPresentation();\n          this.isLoading = false;\n        },\n        error: () => {\n          this.error = \"Simulation failed to run\";\n          this.isLoading = false;\n        }\n      });\n    }\n    startPresentation() {\n      this.isPresenting = true;\n      this.activeStepIndex = 0;\n      this.startStepTimer();\n      if (document.documentElement.requestFullscreen) {\n        document.documentElement.requestFullscreen().catch(() => null);\n      }\n    }\n    stopPresentation() {\n      this.isPresenting = false;\n      this.clearTimer();\n      if (document.fullscreenElement) {\n        document.exitFullscreen().catch(() => null);\n      }\n    }\n    nextStep() {\n      if (this.activeStepIndex < this.demoSteps.length - 1) {\n        this.activeStepIndex += 1;\n        this.startStepTimer();\n      }\n    }\n    prevStep() {\n      if (this.activeStepIndex > 0) {\n        this.activeStepIndex -= 1;\n        this.startStepTimer();\n      }\n    }\n    toggleNotes() {\n      this.showNotes = !this.showNotes;\n    }\n    onLogoUpload(event) {\n      const input = event.target;\n      const file = input.files?.[0];\n      if (!file) return;\n      const reader = new FileReader();\n      reader.onload = () => {\n        this.logoDataUrl = reader.result;\n      };\n      reader.readAsDataURL(file);\n    }\n    downloadPackage() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!_this.simulation || !_this.scenario) return;\n        try {\n          const zip = new JSZip();\n          const agencyName = _this.agencyName;\n          const investorReport = yield firstValueFrom(_this.simulationService.getInvestorReport(_this.simulation.id));\n          if (investorReport) {\n            zip.file(\"demo-report.pdf\", investorReport);\n          }\n          const pitchDeck = yield firstValueFrom(_this.http.get(`${getApiBase()}/api/pitch-deck/${_this.simulation.id}?agency=${encodeURIComponent(agencyName)}&format=pptx`, {\n            responseType: \"blob\"\n          }));\n          if (pitchDeck) {\n            zip.file(\"pitch-deck.pptx\", pitchDeck);\n          }\n          const businessCase = yield firstValueFrom(_this.businessCaseService.getBusinessCase(_this.simulation.id, 5));\n          if (businessCase) {\n            zip.file(\"business-case.json\", JSON.stringify(businessCase, null, 2));\n          }\n          const summary = {\n            agency: agencyName,\n            scenario: _this.scenario.name,\n            expectedResults: _this.scenario.expectedResults,\n            rules: _this.scenario.rules,\n            generatedAt: new Date().toISOString()\n          };\n          zip.file(\"demo-summary.json\", JSON.stringify(summary, null, 2));\n          zip.file(\"agency.txt\", `Agency: ${agencyName}`);\n          if (_this.logoDataUrl) {\n            const logoBlob = _this.dataUrlToBlob(_this.logoDataUrl);\n            zip.file(\"agency-logo.png\", logoBlob);\n          }\n          const content = yield zip.generateAsync({\n            type: \"blob\"\n          });\n          const url = window.URL.createObjectURL(content);\n          const link = document.createElement(\"a\");\n          link.href = url;\n          link.download = `demo-package-${_this.simulation.id}.zip`;\n          link.click();\n          window.URL.revokeObjectURL(url);\n        } catch (error) {\n          _this.error = \"Failed to generate demo package\";\n        }\n      })();\n    }\n    buildSteps(scenario) {\n      const lines = scenario.demoScript.split(\"\\n\").map(line => line.replace(/^\\d+\\.\\s*/, \"\").trim()).filter(Boolean);\n      const notesMap = {\n        mussafah: [\"Highlight industrial logistics delays and economic cost.\", \"Show proposed boundary aligning with freight routes.\", \"Explain free hours to protect supply chains.\", \"Call out emergency/commercial exemptions.\", \"Narrate live simulation execution.\", \"Summarize traffic relief and revenue impact.\"],\n        marina: [\"Show peak weekend tourism pain points.\", \"Connect congestion to visitor sentiment.\", \"Introduce weekend pricing lever.\", \"Mention exemptions for residents/hotel guests.\", \"Explain reinvestment into tourism services.\"],\n        school: [\"Use safety framing to build urgency.\", \"Emphasize cluster coverage for consistency.\", \"Clarify parent permit free window.\", \"Explain deterrence for non-permit vehicles.\", \"Show projected safety and flow gains.\"]\n      };\n      const key = scenario.name.toLowerCase().includes(\"mussafah\") ? \"mussafah\" : scenario.name.toLowerCase().includes(\"marina\") ? \"marina\" : \"school\";\n      return [...lines.map((line, index) => ({\n        title: `Step ${index + 1}`,\n        text: line,\n        notes: notesMap[key][index] ?? \"\",\n        durationMs: 6000\n      })), {\n        title: \"Results\",\n        text: scenario.expectedResults,\n        notes: \"Compare expected vs actual metrics with the audience.\",\n        durationMs: 8000\n      }];\n    }\n    startStepTimer() {\n      this.clearTimer();\n      const step = this.demoSteps[this.activeStepIndex];\n      if (!step) return;\n      this.stepTimer = window.setTimeout(() => {\n        if (this.activeStepIndex < this.demoSteps.length - 1) {\n          this.activeStepIndex += 1;\n          this.startStepTimer();\n        }\n      }, step.durationMs);\n    }\n    clearTimer() {\n      if (this.stepTimer) {\n        window.clearTimeout(this.stepTimer);\n        this.stepTimer = null;\n      }\n    }\n    dataUrlToBlob(dataUrl) {\n      const [header, data] = dataUrl.split(\",\");\n      const mime = header.match(/:(.*?);/)?.[1] ?? \"image/png\";\n      const binary = atob(data);\n      const array = new Uint8Array(binary.length);\n      for (let i = 0; i < binary.length; i += 1) {\n        array[i] = binary.charCodeAt(i);\n      }\n      return new Blob([array], {\n        type: mime\n      });\n    }\n    static {\n      this.ɵfac = function DemoModeComponent_Factory(t) {\n        return new (t || DemoModeComponent)(i0.ɵɵdirectiveInject(i1.DemoModeService), i0.ɵɵdirectiveInject(i2.SimulationService), i0.ɵɵdirectiveInject(i3.BusinessCaseService), i0.ɵɵdirectiveInject(i4.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DemoModeComponent,\n        selectors: [[\"app-demo-mode\"]],\n        decls: 44,\n        vars: 12,\n        consts: [[1, \"demo-section\"], [1, \"demo-header\"], [1, \"demo-panel\"], [1, \"demo-left\"], [1, \"demo-buttons\"], [1, \"primary\", 3, \"click\"], [1, \"demo-for\"], [3, \"ngModelChange\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [\"type\", \"file\", \"accept\", \"image/*\", 3, \"change\"], [\"class\", \"logo-preview\", 4, \"ngIf\"], [1, \"demo-actions\"], [1, \"secondary\", 3, \"click\", \"disabled\"], [\"class\", \"status\", 4, \"ngIf\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"demo-right\"], [1, \"agency-line\"], [\"class\", \"step-card\", 4, \"ngIf\"], [\"class\", \"presentation-overlay\", 4, \"ngIf\"], [3, \"value\"], [\"type\", \"text\", 3, \"ngModelChange\", \"ngModel\"], [1, \"logo-preview\"], [\"alt\", \"Agency logo\", 3, \"src\"], [1, \"status\"], [1, \"error\"], [1, \"step-card\"], [\"class\", \"notes\", 4, \"ngIf\"], [1, \"step-controls\"], [3, \"click\"], [1, \"notes\"], [1, \"presentation-overlay\"], [1, \"presentation\"], [1, \"presentation-header\"], [\"alt\", \"Agency logo\", 3, \"src\", 4, \"ngIf\"], [1, \"presentation-body\"], [\"class\", \"results\", 4, \"ngIf\"], [1, \"presentation-footer\"], [1, \"danger\", 3, \"click\"], [\"class\", \"speaker-notes\", 4, \"ngIf\"], [1, \"results\"], [1, \"speaker-notes\"]],\n        template: function DemoModeComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵtext(3, \"Quick Demo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\");\n            i0.ɵɵtext(5, \"Launch government-ready scenarios with one click.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 2)(7, \"div\", 3)(8, \"h3\");\n            i0.ɵɵtext(9, \"One-Click Demo Launcher\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 4)(11, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function DemoModeComponent_Template_button_click_11_listener() {\n              return ctx.launchDemo(\"mussafah\");\n            });\n            i0.ɵɵtext(12, \" Mussafah Gridlock \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function DemoModeComponent_Template_button_click_13_listener() {\n              return ctx.launchDemo(\"marina\");\n            });\n            i0.ɵɵtext(14, \" Marina Chaos \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function DemoModeComponent_Template_button_click_15_listener() {\n              return ctx.launchDemo(\"school\");\n            });\n            i0.ɵɵtext(16, \" School Safety \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"div\", 6)(18, \"h3\");\n            i0.ɵɵtext(19, \"Demo for Agency\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"label\");\n            i0.ɵɵtext(21, \"Agency\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"select\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function DemoModeComponent_Template_select_ngModelChange_22_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.selectedAgency, $event) || (ctx.selectedAgency = $event);\n              return $event;\n            });\n            i0.ɵɵtemplate(23, DemoModeComponent_option_23_Template, 2, 2, \"option\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(24, DemoModeComponent_div_24_Template, 4, 1, \"div\", 9);\n            i0.ɵɵelementStart(25, \"label\");\n            i0.ɵɵtext(26, \"Agency Logo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"input\", 10);\n            i0.ɵɵlistener(\"change\", function DemoModeComponent_Template_input_change_27_listener($event) {\n              return ctx.onLogoUpload($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(28, DemoModeComponent_div_28_Template, 2, 1, \"div\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"div\", 12)(30, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function DemoModeComponent_Template_button_click_30_listener() {\n              return ctx.downloadPackage();\n            });\n            i0.ɵɵtext(31, \" Download Demo Package (ZIP) \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function DemoModeComponent_Template_button_click_32_listener() {\n              return ctx.startPresentation();\n            });\n            i0.ɵɵtext(33, \" Start Presentation \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(34, DemoModeComponent_div_34_Template, 2, 0, \"div\", 14)(35, DemoModeComponent_div_35_Template, 2, 1, \"div\", 15);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"div\", 16)(37, \"h3\");\n            i0.ɵɵtext(38, \"Demo Script\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"p\", 17);\n            i0.ɵɵtext(40);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(41, DemoModeComponent_div_41_Template, 13, 4, \"div\", 18)(42, DemoModeComponent_div_42_Template, 3, 0, \"div\", 18);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(43, DemoModeComponent_div_43_Template, 23, 7, \"div\", 19);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(22);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedAgency);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.agencyOptions);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedAgency === \"Custom\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.logoDataUrl);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", !ctx.simulation);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", !ctx.scenario);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtextInterpolate1(\"Prepared for \", ctx.agencyName, \"\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.demoSteps.length);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.demoSteps.length);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isPresenting);\n          }\n        },\n        dependencies: [i5.NgForOf, i5.NgIf, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgModel, i5.DecimalPipe],\n        styles: [\".demo-container[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:20px;padding:1.5rem;box-shadow:0 8px 32px #00000014;border:1px solid rgba(255,255,255,.5);animation:_ngcontent-%COMP%_slideUp .5s ease-out}.demo-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.demo-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a;display:flex;align-items:center;gap:.5rem}.demo-title[_ngcontent-%COMP%]:before{content:\\\"\\\";width:4px;height:20px;background:linear-gradient(180deg,#0d47a1,#f59e0b);border-radius:4px}.demo-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-demo[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#fff;border:2px solid #E2E8F0;border-radius:8px;font-size:.85rem;font-weight:500;color:#475569;cursor:pointer;transition:all .2s ease}.btn-demo[_ngcontent-%COMP%]:hover{border-color:#0d47a1;color:#0d47a1}.btn-demo.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d47a1,#1565c0);border-color:#0d47a1;color:#fff}.btn-demo.primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0d47a14d}.scenario-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;margin-bottom:1.5rem}.scenario-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.25rem;border:2px solid #E2E8F0;cursor:pointer;transition:all .2s ease}.scenario-card[_ngcontent-%COMP%]:hover{border-color:#0d47a1;transform:translateY(-4px);box-shadow:0 12px 24px #0000001a}.scenario-card.selected[_ngcontent-%COMP%]{border-color:#0d47a1;background:linear-gradient(135deg,#0d47a10d,#0d47a105)}.scenario-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:linear-gradient(135deg,#0d47a1,#1565c0);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-bottom:1rem}.scenario-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.scenario-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#64748b;margin:0;line-height:1.5}.scenario-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;background:#10b9811a;color:#059669;font-size:.7rem;font-weight:600;border-radius:4px;margin-top:.75rem;text-transform:uppercase}.demo-player[_ngcontent-%COMP%]{background:linear-gradient(180deg,#fff,#f8fafc);border-radius:16px;padding:1.5rem;border:1px solid #E2E8F0}.player-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.player-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;color:#0f172a}.player-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.progress-bar[_ngcontent-%COMP%]{width:200px;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#0d47a1,#f59e0b);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:#64748b}.player-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:1rem}.player-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:#fff;border:2px solid #E2E8F0;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;font-size:1.1rem}.player-btn[_ngcontent-%COMP%]:hover{border-color:#0d47a1;color:#0d47a1}.player-btn.play[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0d47a1,#1565c0);border-color:#0d47a1;color:#fff}.player-btn.play[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 12px #0d47a14d}.demo-content[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:1.25rem;margin-bottom:1rem;border:1px solid #E2E8F0}.demo-step[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin-bottom:.5rem}.demo-description[_ngcontent-%COMP%]{font-size:1.1rem;color:#0f172a;font-weight:500;line-height:1.6}.quick-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin-top:1rem}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:.75rem;background:#fff;border-radius:10px;border:1px solid #E2E8F0}.stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0d47a1}.stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;margin-top:.25rem}@media (max-width: 768px){.demo-container[_ngcontent-%COMP%]{padding:1rem}.demo-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.scenario-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.quick-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.progress-bar[_ngcontent-%COMP%]{width:100px}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}\"]\n      });\n    }\n  }\n  return DemoModeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}